System.register([], function(_export, _context) { return { execute: function () {
System.register("chunks:///_virtual/cjs-loader.mjs",[],(function(e){"use strict";return{execute:function(){e("default",new(function(){function e(){this._registry={},this._moduleCache={}}var r=e.prototype;return r.define=function(e,r,t){this._registry[e]={factory:r,resolveMap:t}},r.require=function(e){return this._require(e)},r.throwInvalidWrapper=function(e,r){throw new Error("Module '"+e+"' imported from '"+r+"' is expected be an ESM-wrapped CommonJS module but it doesn't.")},r._require=function(e,r){var t=this._moduleCache[e];if(t)return t.exports;var o={id:e,exports:{}};return this._moduleCache[e]=o,this._tryModuleLoad(o,e),o.exports},r._resolve=function(e,r){return this._resolveFromInfos(e,r)||this._throwUnresolved(e,r)},r._resolveFromInfos=function(e,r){var t,o;return e in cjsInfos?e:r&&null!=(t=null==(o=cjsInfos[r])?void 0:o.resolveCache[e])?t:void 0},r._tryModuleLoad=function(e,r){var t=!0;try{this._load(e,r),t=!1}finally{t&&delete this._moduleCache[r]}},r._load=function(e,r){var t=this._loadWrapper(r),o=t.factory,n=t.resolveMap,i=this._createRequire(e),u=n?this._createRequireWithResolveMap("function"==typeof n?n():n,i):i;o(e.exports,u,e)},r._loadWrapper=function(e){return e in this._registry?this._registry[e]:this._loadHostProvidedModules(e)},r._loadHostProvidedModules=function(e){return{factory:function(r,t,o){if("undefined"==typeof require)throw new Error("Current environment does not provide a require() for requiring '"+e+"'.");try{o.exports=require(e)}catch(r){throw new Error("Exception thrown when calling host defined require('"+e+"').",{cause:r})}}}},r._createRequire=function(e){var r=this;return function(t){return r._require(t,e)}},r._createRequireWithResolveMap=function(e,r){return function(t){var o=e[t];if(o)return r(o);throw new Error("Unresolved specifier "+t)}},r._throwUnresolved=function(e,r){throw new Error("Unable to resolve "+e+" from "+parent+".")},e}()))}}}));

System.register("chunks:///_virtual/index.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var r;return{setters:[function(e){r=e.default}],execute:function(){e("default",void 0);var u=e("__cjsMetaURL",t.meta.url);r.define(u,(function(t,r,u,s,n){var i,c;System.register("chunks:///_virtual/resources",[],(function(){return{execute:function(){}}})),i="virtual:///prerequisite-imports/resources",c="chunks:///_virtual/resources",System.register(i,[c],(function(e,t){return{setters:[function(t){var r={};for(var u in t)"default"!==u&&"__esModule"!==u&&(r[u]=t[u]);e(r)}],execute:function(){}}})),e("default",u.exports)}),{})}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=.js",["./index.js","./cjs-loader.mjs"],(function(e,t){"use strict";var r,s;return{setters:[function(t){r=t.__cjsMetaURL;var s={};s.__cjsMetaURL=t.__cjsMetaURL,s.default=t.default,e(s)},function(e){s=e.default}],execute:function(){r||s.throwInvalidWrapper("./index.js",t.meta.url),s.require(r)}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=2.js",["./index2.js","./cjs-loader.mjs"],(function(e,t){"use strict";var r,s;return{setters:[function(t){r=t.__cjsMetaURL;var s={};s.__cjsMetaURL=t.__cjsMetaURL,s.default=t.default,e(s)},function(e){s=e.default}],execute:function(){r||s.throwInvalidWrapper("./index.js",t.meta.url),s.require(r)}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=3.js",["./index3.js","./cjs-loader.mjs"],(function(e,t){"use strict";var r,s;return{setters:[function(t){r=t.__cjsMetaURL;var s={};s.__cjsMetaURL=t.__cjsMetaURL,s.default=t.default,e(s)},function(e){s=e.default}],execute:function(){r||s.throwInvalidWrapper("./index.js",t.meta.url),s.require(r)}}}));

System.register("chunks:///_virtual/index.mjs_cjs=&original=4.js",["./index4.js","./cjs-loader.mjs"],(function(e,t){"use strict";var r,s;return{setters:[function(t){r=t.__cjsMetaURL;var s={};s.__cjsMetaURL=t.__cjsMetaURL,s.default=t.default,e(s)},function(e){s=e.default}],execute:function(){r||s.throwInvalidWrapper("./index.js",t.meta.url),s.require(r)}}}));

System.register("chunks:///_virtual/index2.js",["./cjs-loader.mjs"],(function(t,e){"use strict";var i;return{setters:[function(t){i=t.default}],execute:function(){t("default",void 0);var n=t("__cjsMetaURL",e.meta.url);i.define(n,(function(e,i,n,r,o){var s,a;System.register("chunks:///_virtual/AdCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tools.ts"],(function(t){var e,i,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.Component},function(t){o=t.Tools}],execute:function(){var s;i._RF.push({},"f89car+1jZEc6gj/T8j/L7F","AdCtrl",void 0);var a=n.ccclass;n.property,t("AdCtrl",a("AdCtrl")(s=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.onEnable=function(){o.clearUI(this.node)},n.onGo=function(t,e){window.open(e),o.clearUI(this.node)},i}(r))||s),i._RF.pop()}}})),System.register("chunks:///_virtual/AdMgr.ts",["cc","./Enums.ts","./Global.ts","./ResMgr.ts","./WxPlatform.ts"],(function(t){var e,i,n,r,o,s,a,l;return{setters:[function(t){e=t.cclegacy,i=t.sys,n=t.director},function(t){r=t.events,o=t.ui},function(t){s=t.Global},function(t){a=t.default},function(t){l=t.WxPlatform}],execute:function(){e._RF.push({},"1e5df/DgoRAAJ3KjQ8JunDt","AdMgr",void 0),t("AdMgr",function(){function t(){}return t.closeAd=function(){switch(i.platform){case i.Platform.WECHAT_GAME:l.ins.hideBanner(),this.bannerOn=!1;break;case i.Platform.BYTEDANCE_MINI_GAME:case i.Platform.ANDROID:}},t.showBanner=function(){switch(i.platform){case i.Platform.WECHAT_GAME:this.bannerOn||l.ins.showBanner();break;case i.Platform.BYTEDANCE_MINI_GAME:case i.Platform.ANDROID:}},t.showInterstial=function(t){switch(void 0===t&&(t=0),i.platform){case i.Platform.WECHAT_GAME:l.ins.showInterstitialAd(t);break;case i.Platform.MOBILE_BROWSER:case i.Platform.DESKTOP_BROWSER:case i.Platform.BYTEDANCE_MINI_GAME:case i.Platform.ANDROID:}},t.showVideo=function(t){switch(void 0===t&&(t=null),i.platform){case i.Platform.MOBILE_BROWSER:case i.Platform.DESKTOP_BROWSER:t&&t();break;case i.Platform.WECHAT_GAME:s.Pause(),l.ins.showRewardVideo((function(e){1==e?(t&&t(),s.Pause(!1),n.emit(r.Toast,"获取奖励成功")):2==e?(s.Pause(!1),s.enableShareAd?(n.emit(r.Toast,"暂无广告，分享可以获得奖励喔"),setTimeout((function(){l.ins.showShare(),setTimeout((function(){t&&t()}),1500)}),500)):(s.Pause(!1),n.emit(r.Toast,"获取奖励失败"))):(s.Pause(!1),n.emit(r.Toast,"获取奖励失败"))}));break;case i.Platform.BYTEDANCE_MINI_GAME:case i.Platform.ANDROID:}},t.showWebIntersital=function(){a.ins.getUI(o.AdView)},t}()).bannerOn=!1,e._RF.pop()}}})),System.register("chunks:///_virtual/AdView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(t){var e,i,n,r,o,s,a,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,n=t.inheritsLoose,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.SpriteFrame,l=t.Sprite},function(t){u=t.BaseView}],execute:function(){var c,h,p,f,d,g,m,y,v,w,b,_,C,M,T;o._RF.push({},"51b60/07hJEJp+4DkeUlms3","AdView",void 0);var S=s.ccclass,P=s.property,E=(c=S("adCf"),h=P({type:a}),c((d=e((f=function(){i(this,"adSF",d,this),i(this,"adLink",g,this)}).prototype,"adSF",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(f.prototype,"adLink",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=f))||p);t("AdView",(m=S("AdView"),y=P({type:E}),v=P({type:l}),m((_=e((b=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(e,"ads",_,r(e)),i(e,"sp",C,r(e)),i(e,"Carousel",M,r(e)),i(e,"cTime",T,r(e)),e.id=0,e.link="",e}n(e,t);var o=e.prototype;return o.onEnable=function(){this.id=Math.floor(this.ads.length*Math.random()),this.updateAD(),this.Carousel&&this.schedule(this.changeAd,this.cTime)},o.onDisbale=function(){this.unschedule(this.changeAd)},o.onGo=function(){window.open(this.link),t.prototype.close.call(this)},o.changeAd=function(){this.id++,this.id>=this.ads.length&&(this.id=0),this.updateAD()},o.updateAD=function(){var t=this.ads[this.id].adSF;this.sp.spriteFrame=t,this.link=this.ads[this.id].adLink},e}(u)).prototype,"ads",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=e(b.prototype,"sp",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(b.prototype,"Carousel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=e(b.prototype,"cTime",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),w=b))||w)),o._RF.pop()}}})),System.register("chunks:///_virtual/Astar.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("buildGrid",(function(t,e){for(var i=[],n=0;n<t;n++){i[n]=[];for(var r=0,o=i[n];r<e;r++)o[r]=1}return i})),e._RF.push({},"692f84prCZLC4gpruun5j/e","Astar",void 0);var i=Math.sqrt(2);function n(t){for(var e=t,i=[];e.parent;)i.unshift(e),e=e.parent;return i}t("Astar",function(){function t(){}var e=t.prototype;return e.search=function(t,e,i){t.cleanDirty();var r=new o((function(t){return t.f}));for(e.h=this.manhattan(e,i),t.markDirty(e),r.push(e);r.size()>0;){var s=r.pop();if(s===i)return n(s);s.closed=!0;for(var a=t.neighbors(s),l=0,u=a.length;l<u;++l){var c=a[l];if(!c.closed&&!c.isWall()){var h=s.g+c.getCost(s),p=c.visited;(!p||h<c.g)&&(c.visited=!0,c.parent=s,c.h=this.manhattan(c,i),c.g=h,c.f=c.g+c.h,t.markDirty(c),p?r.rescoreElement(c):r.push(c))}}}return[]},e.manhattan=function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},e.diagonal=function(t,e){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(n+r)+(i-2)*Math.min(n,r)},t}()),t("Graph",function(){function t(t,e){void 0===e&&(e=!0),this.nodes=void 0,this.diagonal=void 0,this.grid=void 0,this.dirtyNodes=void 0,this.diagonal=e,this.nodes=[],this.grid=[],this.dirtyNodes=[];for(var i=0;i<t.length;i++){this.grid[i]=[];for(var n=0,o=t[i];n<o.length;n++){var s=new r(i,n,o[n]);this.grid[i][n]=s,this.nodes.push(s)}}}var e=t.prototype;return e.setWeight=function(t,e){this.getNode(t).weight=e},e.getNode=function(t){return this.grid[t[0]][t[1]]},e.clearNodes=function(){this.nodes.forEach((function(t){t.weight=1})),this.cleanDirty()},e.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)(e=this.dirtyNodes[t]).f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null;var e;this.dirtyNodes=[]},e.markDirty=function(t){this.dirtyNodes.push(t)},e.neighbors=function(t){var e=[],i=t.x,n=t.y,r=this.grid;return r[i-1]&&r[i-1][n]&&e.push(r[i-1][n]),r[i+1]&&r[i+1][n]&&e.push(r[i+1][n]),r[i]&&r[i][n-1]&&e.push(r[i][n-1]),r[i]&&r[i][n+1]&&e.push(r[i][n+1]),this.diagonal&&(r[i-1]&&r[i-1][n-1]&&e.push(r[i-1][n-1]),r[i+1]&&r[i+1][n-1]&&e.push(r[i+1][n-1]),r[i-1]&&r[i-1][n+1]&&e.push(r[i-1][n+1]),r[i+1]&&r[i+1][n+1]&&e.push(r[i+1][n+1])),e},e.toString=function(){for(var t=[],e=this.grid,i=e.length,n=0;n<i;n++){for(var r=[],o=e[n],s=o.length,a=0;a<s;a++)r.push(o[a].weight);t.push(r.join(" "))}return t.join("\n")},t}());var r=t("GridNode",function(){function t(t,e,i){this.x=void 0,this.y=void 0,this.weight=void 0,this.f=void 0,this.g=void 0,this.h=void 0,this.visited=void 0,this.closed=void 0,this.parent=void 0,this.x=t,this.y=e,this.f=0,this.g=0,this.h=0,this.weight=i,this.visited=!1,this.closed=!1,this.parent=null}var e=t.prototype;return e.getCost=function(t){return t&&t.x!=this.x&&t.y!=this.y?1.41421*this.weight:this.weight},e.isWall=function(){return 0===this.weight},e.toString=function(){return"["+this.x+" "+this.y+"]"},t}());function o(t){this.content=[],this.scoreFunction=t}o.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var i=(t+1>>1)-1,n=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[i]=e,this.content[t]=n,t=i}},bubbleUp:function(t){for(var e=this.content.length,i=this.content[t],n=this.scoreFunction(i);;){var r=t+1<<1,o=r-1,s=null,a=void 0;if(o<e){var l=this.content[o];(a=this.scoreFunction(l))<n&&(s=o)}if(r<e){var u=this.content[r];this.scoreFunction(u)<(null===s?n:a)&&(s=r)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=i,t=s}}},e._RF.pop()}}})),System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./ResMgr.ts"],(function(t){var e,i,n,r,o,s,a,l;return{setters:[function(t){e=t.createClass,i=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t._decorator,s=t.AudioSourceComponent},function(t){a=t.Global},function(t){l=t.default}],execute:function(){var u,c;r._RF.push({},"bf129C5rEdIyKQStT72J8k4","AudioMgr",void 0);var h=o.ccclass;o.property,t("AudioMgr",h("AudioMgr")(((c=function(){function t(){this._audioComp=null,this._audioLoopComp=null,this._curLoopAudioName=""}var r=t.prototype;return r.initAudio=function(){this._audioComp=new s,this._audioComp.loop=!0,this._audioLoopComp=new s,this._audioLoopComp.loop=!0,this._audioLoopComp.volume=.3},r.playMusic=function(){var t=i(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!=a.bgm){t.next=2;break}return t.abrupt("return");case 2:if(!this._audioComp.clip){t.next=5;break}return this._audioComp.play(),t.abrupt("return");case 5:return t.next=7,l.ins.getClip(e);case 7:i=t.sent,this._audioComp.volume=.8,this._audioComp.clip=i,this._audioComp.play();case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.stopMusic=function(){this._audioComp.stop()},r.playSound=function(){var t=i(n().mark((function t(e,i){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=1),-1!=a.sound){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,l.ins.getClip(e);case 5:r=t.sent,this._audioComp.playOneShot(r,i);case 7:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.playLoopSound=function(){var t=i(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!=a.sound){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,l.ins.getClip(e);case 4:i=t.sent,this._audioLoopComp.stop(),this._audioLoopComp.clip=i,this._audioLoopComp.play(),this._curLoopAudioName=e;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.stopLoopSound=function(){var t=i(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._audioLoopComp.stop();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isLoopAudioPlaying=function(){return this._audioLoopComp.playing},e(t,[{key:"curLoopAudioName",get:function(){return this._curLoopAudioName}}],[{key:"ins",get:function(){return this._ins||(this._ins=new t,this._ins.initAudio()),this._ins}}]),t}())._ins=null,u=c))||u),r._RF.pop()}}})),System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdMgr.ts","./Enums.ts","./Global.ts","./AudioMgr.ts","./PoolMgr.ts","./Tools.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Node,l=t.Component},function(t){u=t.AdMgr},function(t){c=t.Props,h=t.Clips},function(t){p=t.Global},function(t){f=t.AudioMgr},function(t){d=t.PoolMgr},function(t){g=t.Tools}],execute:function(){var m,y,v,w,b,_,C,M,T,S,P,E,x,L,D,R,A,I,B,V,k,z,G,F,N,O,U;o._RF.push({},"29938V4SlNABr3n+tOEsozR","BaseView",void 0);var H=s.ccclass,j=s.property;t("BaseView",(m=H("BaseView"),y=j({displayOrder:0,group:c.View}),v=j({type:a,visible:function(){return this.tweenView},displayOrder:0,group:c.View}),w=j({visible:function(){return this.tweenView},displayOrder:0,group:c.View}),b=j({displayOrder:0,group:c.View}),_=j({group:c.Ad,tooltip:"show Banner on Start"}),C=j({visible:function(){return this.showBannerAd},range:[0,5],group:c.Ad}),M=j({visible:function(){return this.showBannerAd},group:c.Ad,tooltip:"hide Banner on Start"}),T=j({visible:function(){return this.showBannerAd},group:c.Ad}),S=j({group:c.Ad,tooltip:"show Intersitial Ad on Start"}),P=j({visible:function(){return this.showIntersitialAd},range:[0,5],group:c.Ad}),E=j({group:c.Ad,tooltip:"show video Ad on Start"}),x=j({visible:function(){return this.showVideoAd},range:[0,5],group:c.Ad}),m((R=e((D=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"tweenView",R,r(e)),n(e,"root",A,r(e)),n(e,"tweenTime",I,r(e)),n(e,"playBtnClip",B,r(e)),n(e,"showBannerAd",V,r(e)),n(e,"bannerDelay",k,r(e)),n(e,"hideBannerOnClose",z,r(e)),n(e,"displayinSmallscreen",G,r(e)),n(e,"showIntersitialAd",F,r(e)),n(e,"intersitialDelay",N,r(e)),n(e,"showVideoAd",O,r(e)),n(e,"videoDelay",U,r(e)),e}i(e,t);var o=e.prototype;return o.onEnable=function(){var t=this;this.playBtnClip&&f.ins.playSound(h.btn),this.tweenView&&(this.root?g.fadeIn(this.root):(this.root=this.node,this.scheduleOnce((function(){g.fadeIn(t.root)})))),this.showAds()},o.onDisable=function(){this.hideBannerOnClose&&this.closeAd()},o.close=function(){var t=this;this.playBtnClip&&f.ins.playSound(h.btn,.5),this.showBannerAd&&this.closeAd(),this.tweenView?(this.root||(this.root=this.node),g.fadeOut(this.root,(function(){d.ins.putNode(t.node)}))):d.ins.putNode(this.node)},o.showAds=function(){var t=this;if(this.showBannerAd){if(!this.displayinSmallscreen&&p.screenRatio<=1.1)return;this.scheduleOnce((function(){t.showBanner()}),this.bannerDelay)}this.showIntersitialAd&&this.scheduleOnce((function(){t.showIntersitial()}),this.intersitialDelay),this.showVideoAd&&this.scheduleOnce((function(){t.showVideo()}),this.bannerDelay)},o.closeAd=function(){u.closeAd()},o.showBanner=function(){u.showBanner()},o.showVideo=function(t){void 0===t&&(t=null),u.showVideo(t)},o.showIntersitial=function(){u.showInterstial(this.bannerDelay)},e}(l)).prototype,"tweenView",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=e(D.prototype,"root",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(D.prototype,"tweenTime",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),B=e(D.prototype,"playBtnClip",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=e(D.prototype,"showBannerAd",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=e(D.prototype,"bannerDelay",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=e(D.prototype,"hideBannerOnClose",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),G=e(D.prototype,"displayinSmallscreen",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F=e(D.prototype,"showIntersitialAd",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=e(D.prototype,"intersitialDelay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=e(D.prototype,"showVideoAd",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=e(D.prototype,"videoDelay",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=D))||L)),o._RF.pop()}}})),System.register("chunks:///_virtual/BuildCardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdMgr.ts","./WxPlatform.ts","./Enums.ts","./GameConfig.ts","./DataMgr.ts","./Tools.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,u=t.Node,c=t.Label,h=t.director,p=t.Component},function(t){f=t.AdMgr},function(t){d=t.WxPlatform},function(t){g=t.events},function(t){m=t.GameConfig},function(t){y=t.DataMgr},function(t){v=t.Tools}],execute:function(){var w,b,_,C,M,T,S,P,E,x,L,D,R;a._RF.push({},"050275w/kxPq53EGe2d4hVB","BuildCardView",void 0);var A=l.ccclass,I=l.property;t("BuildCardView",(w=A("BuildCardView"),b=I(u),_=I(u),C=I(u),M=I(u),T=I(c),w((E=e((P=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"newBtn",E,r(e)),n(e,"editBtn",x,r(e)),n(e,"playBtn",L,r(e)),n(e,"shareBtn",D,r(e)),n(e,"idLabel",R,r(e)),e.cardIndex=null,e}i(e,t);var a=e.prototype;return a.init=function(){var t=o(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cardIndex=e,-1==e?(this.newBtn.active=!0,this.editBtn.active=!1,this.playBtn.active=!1,this.shareBtn.active=!1,this.idLabel.string="new"):(this.newBtn.active=!1,this.shareBtn.active=!1,this.editBtn.active=!0,this.playBtn.active=!0,this.idLabel.string=y.getId(this.cardIndex));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.goBuild=function(){var t=this;f.showVideo((function(){t.buildNewMap()}))},a.buildNewMap=function(){var t=y.MapData.length;t>y.maxMaps||(y.currentMap=t,y.MapData={id:v.getDateId()},h.emit(g.buildMap))},a.goEdit=function(){y.currentMap=this.cardIndex,h.emit(g.editMap,y.currentMap)},a.goPlay=function(){y.currentMap=this.cardIndex,h.emit(g.playMap,y.currentMap)},a.goShare=function(){var t="map="+JSON.stringify(y.MapData[this.cardIndex]),e=t.length;if(e<=m.maxShareLength-5)d.ins.showShare(t);else{var i="地图长度："+e+"最大长度："+m.maxShareLength;h.emit(g.Toast,i)}},e}(p)).prototype,"newBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(P.prototype,"editBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(P.prototype,"playBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"shareBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(P.prototype,"idLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P))||S)),a._RF.pop()}}})),System.register("chunks:///_virtual/BuildView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./DataMgr.ts","./PoolMgr.ts","./ResMgr.ts","./BaseView.ts","./BuildCardView.ts","./GameView.ts","./EditorView.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,u=t.Node,c=t.director},function(t){h=t.events,p=t.ui,f=t.topStates},function(t){d=t.Global},function(t){g=t.DataMgr},function(t){m=t.PoolMgr},function(t){y=t.default},function(t){v=t.BaseView},function(t){w=t.BuildCardView},function(t){b=t.GameView},function(t){_=t.EditorView}],execute:function(){var C,M,T,S,P;a._RF.push({},"3abe6A72kJD9ayQP9vZfZ/P","BuildView",void 0);var E=l.ccclass,x=l.property;t("BuildView",(C=E("BuildView"),M=x(u),C((P=e((S=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"cardLayout",P,r(e)),e}i(e,t);var a=e.prototype;return a.onEnable=function(){var t=o(s().mark((function t(){var e,i,n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.emit(h.paperOcacity,90),c.on(h.startCustom,this.onClose,this),c.on(h.buildMap,this.goBuild,this),c.on(h.editMap,this.goEdit,this),c.on(h.playMap,this.goPlay,this),c.emit(h.changeTop,f.hideAll),e=g.MapData,i=e.length,n=i>=g.maxMaps?0:-1,r=n;case 10:if(!(r<i)){t.next=18;break}return t.next=13,y.ins.getUI(p.BuildCardView,this.cardLayout);case 13:t.sent.getComponent(w).init(r);case 15:r++,t.next=10;break;case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.onDisable=function(){c.off(h.startCustom,this.onClose,this),c.off(h.buildMap,this.goBuild,this),c.off(h.editMap,this.goEdit,this),c.off(h.playMap,this.goPlay,this);for(var t=this.cardLayout.children.length-1;t>=0;t--)m.ins.putNode(this.cardLayout.children[0])},a.goPlay=function(){var e=o(s().mark((function e(i){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.prototype.close.call(this),e.next=3,y.ins.getUI(p.GameView);case 3:n=e.sent,r=g.MapData[i],n.getComponent(b).init(1,r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.goBuild=function(){var e=o(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.prototype.close.call(this),e.next=3,y.ins.getUI(p.EditorView);case 3:e.sent.getComponent(_).init();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.goEdit=function(){var t=o(s().mark((function t(e){var i,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.ins.getUI(p.EditorView);case 2:i=t.sent,n=g.MapData[e],i.getComponent(_).editMap(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.onClose=function(){t.prototype.close.call(this)},a.goBack=function(){t.prototype.close.call(this),m.ins.getNode("HomeView",d.layer[1])},e}(v)).prototype,"cardLayout",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T)),a._RF.pop()}}})),System.register("chunks:///_virtual/CamShot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Camera,l=t.RenderTexture,u=t.view,c=t.Layers,h=t.ImageAsset,p=t.Texture2D,f=t.SpriteFrame,d=t.sys,g=t.Component}],execute:function(){var m,y,v,w,b,_;o._RF.push({},"87552Srt+JLU6pT/AOmo82E","CamShot",void 0);var C=s.ccclass,M=s.property,T=.5,S=t("captureSize",[Math.round(300),Math.round(360)]);t("CamShot",(m=C("CamShot"),y=M(a),m(((_=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"mainCam",b,r(e)),e.rt=null,e._canvas=null,e._buffer=null,e._size=new Array(2),e._cam=null,e}i(e,t);var o=e.prototype;return o.start=function(){e.ins=this},o.initCam=function(){this._cam=this.node.getComponent(a),this.rt=new l,this._size=[Math.round(u.getVisibleSize().width*T),Math.round(u.getVisibleSize().height*T)],this.rt.reset({width:Math.round(this._size[0]),height:Math.round(this._size[1])}),this._cam.targetTexture=this.rt,this.setHeight(),this._cam.visibility=c.Enum.NONE},o.setHeight=function(){this._cam.orthoHeight=this.mainCam.orthoHeight,this._cam.node.worldPosition=this.mainCam.node.worldPosition,this._size=[Math.round(u.getVisibleSize().width*T),Math.round(u.getVisibleSize().height*T)]},o.copyRenderTex=function(t,e){var i=this;void 0===e&&(e=[0,0]),this._cam.visibility=c.Enum.DEFAULT,this._buffer=null,this.scheduleOnce((function(){var n=S[0],r=S[1],o=.5*(i._size[0]+e[0]-S[0]),s=.5*(i._size[1]+e[1]-S[1]);i._buffer=i.rt.readPixels(o,s,n,r),i._cam.visibility=c.Enum.NONE,i.showImage(t)}))},o.showImage=function(t){var e=new h;e.reset({_data:this._buffer,width:S[0],height:S[1],format:p.PixelFormat.RGBA8888,_compressed:!1});var i=new p;i.image=e;var n=new f;n.texture=i,n.packable=!1,t.spriteFrame=n,t.spriteFrame.flipUVY=!0,!d.isNative||d.os!==d.OS.IOS&&d.os!==d.OS.OSX||(t.spriteFrame.flipUVY=!1)},o.savaAsImage=function(t,e,i){if(d.platform===d.Platform.WECHAT_GAME){this._canvas?this.clearCanvas():(this._canvas=wx.createCanvas(),this._canvas.width=t,this._canvas.height=e);for(var n=this._canvas.getContext("2d"),r=4*t,o=0;o<e;o++){for(var s=e-1-o,a=n.createImageData(t,1),l=s*t*4,u=0;u<r;u++)a.data[u]=i[l+u];n.putImageData(a,0,o)}this._canvas.toTempFilePath({x:0,y:0,width:this._canvas.width,height:this._canvas.height,destWidth:this._canvas.width,destHeight:this._canvas.height,fileType:"png",success:function(t){wx.showToast({title:"截图成功"}),wx.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){wx.showToast({title:"成功保存到设备相册"})},fail:function(){}})},fail:function(){wx.showToast({title:"截图失败"})}})}},o.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},o.onSaveImageBtnClicked=function(){var t=S[0],e=S[1];this.savaAsImage(t,e,this._buffer)},e}(g)).ins=null,b=e((w=_).prototype,"mainCam",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v)),o._RF.pop()}}})),System.register("chunks:///_virtual/CaptureCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Sprite,l=t.Camera,u=t.SpriteFrame,c=t.RenderTexture,h=t.Texture2D,p=t.Rect,f=t.Component}],execute:function(){var d,g,m,y,v,w,b;o._RF.push({},"880d72s//FBPrSPR2Ccmuq1","CaptureCtrl",void 0);var _=s.ccclass,C=s.property;s.menu,t("CaptureCtrl",(d=_("CaptureCtrl"),g=C(a),m=C(l),d((w=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"sprite",w,r(e)),n(e,"camera",b,r(e)),e._renderTex=null,e}i(e,t);var o=e.prototype;return o.test=function(){var t=this.sprite.spriteFrame,e=new u;e.reset({originalSize:t.originalSize,rect:t.rect,offset:t.offset,isRotate:t.rotated,borderTop:t.insetTop,borderLeft:t.insetLeft,borderBottom:t.insetBottom,borderRight:t.insetRight});var i=this._renderTex=new c;i.reset({width:360,height:640}),this.camera.node.active=!0,this.camera.targetTexture=i,new h,e.texture=i,this.sprite.spriteFrame=e;var n=new p(400,0,512,512),r=this.sprite;t.rect=n,r.updateMaterial(),this.sprite.updateRenderer(),r.markForUpdateRenderData(),r._updateUVs(),console.log(11,t.rect),this.scheduleOnce((function(){}))},o.onDestroy=function(){this._renderTex&&(this._renderTex.destroy(),this._renderTex=null)},e}(f)).prototype,"sprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(v.prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y)),o._RF.pop()}}})),System.register("chunks:///_virtual/CustomView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./ResMgr.ts","./BaseView.ts","./GameView.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,u=t.Label,c=t.director},function(t){h=t.events,p=t.ui},function(t){f=t.Global},function(t){d=t.default},function(t){g=t.BaseView},function(t){m=t.GameView}],execute:function(){var y,v,w,b,_;a._RF.push({},"9ae0fiYFrVLyIJtMoq7jD0V","CustomView",void 0);var C=l.ccclass,M=l.property;t("CustomView",(y=C("CustomView"),v=M(u),y((_=e((b=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"playLable",_,r(e)),e.mapData=null,e}i(e,t);var a=e.prototype;return a.play=function(){var t=o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.playLable.string=null,f.time=9,c.emit(h.startCustom),t.next=5,d.ins.getUI(p.GameView);case 5:t.sent.getComponent(m).init(1,this.mapData),this.closePanel();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.init=function(t){this.mapData=t;var e=t.id;this.playLable.string="开始好友关卡： "+e},a.closePanel=function(){t.prototype.close.call(this)},e}(g)).prototype,"playLable",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=b))||w)),a._RF.pop()}}})),System.register("chunks:///_virtual/DataMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Tools.ts"],(function(t){var e,i,n,r,o;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){n=t.Key},function(t){r=t.load,o=t.save}],execute:function(){i._RF.push({},"b9038y6AFJG/pJuS+gxlJXw","DataMgr",void 0);var s=t("DataMgr",function(){function t(){}return t.getId=function(t){return this._data[t].id},e(t,null,[{key:"MapData",get:function(){if(!this._data){var t=r(n.MapData,2);t?this._data=t:(this._data=[],o(n.MapData,JSON.stringify(this._data)))}return this._data},set:function(t){this._data[this.currentMap]=t,o(n.MapData,JSON.stringify(this._data))}}]),t}());s._data=null,s.currentMap=1,s.maxMaps=5,i._RF.pop()}}})),System.register("chunks:///_virtual/EditorMgr.ts",["cc","./GameConfig.ts","./Tools.ts","./Enums.ts","./GridConfig.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v;return{setters:[function(t){e=t.cclegacy,i=t.Vec2,n=t.Vec3,r=t.Vec4,o=t.Node,s=t.Graphics,a=t.Color,l=t.input,u=t.Input,c=t.instantiate,h=t.director,p=t.Sprite,f=t.UITransform},function(t){d=t.GameConfig},function(t){g=t.Tools},function(t){m=t.events,y=t.default},function(t){v=t.GridConfig}],execute:function(){e._RF.push({},"dce55DUPIZCmqWgfln7e9lU","EditorMgr",void 0);var w=new i,b=new i,_=new n,C=new r;t("EditorMgr",function(){function t(){this.item=null,this.gridmap=[],this.mapData=new Map,this.outPut=null,this.points=[],this.gc=null,this.line=null,this.gizmo=null,this.trans=null,this.touchID=null,this.gridMat=null,this.colliderMap=[],this.lineLength=d.tutorialLineLength/d.timeScale,this.dis=40,this.isEnd=!1,this.isPlayer=!1}var e=t.prototype;return e.init=function(t,e,i,n){this.gizmo=t,this.gridMat=e,this.trans=i,this.outPut=n,this.line=new o("line"),this.line.parent=this.outPut.parent,this.gc=this.line.addComponent(s),this.gc.lineJoin=2,this.gc.lineCap=0,this.gc.strokeColor=a.BLACK,this.gc.lineWidth=14;for(var r=0;r<v.x;r++)this.colliderMap[r]=[]},e.registerEvents=function(){l.on(u.EventType.TOUCH_START,this.onTouchStart,this),l.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(u.EventType.TOUCH_END,this.onTouchEnd,this),l.on(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.unRegisterEvents=function(){l.off(u.EventType.TOUCH_START,this.onTouchStart,this),l.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),l.off(u.EventType.TOUCH_END,this.onTouchEnd,this),l.off(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.clear=function(){this.mapData.clear(),this.clearLine();for(var t=0;t<v.x;t++)this.colliderMap[t]=[];this.outPut.destroyAllChildren()},e.setGridSelect=function(t,e){if(!t)return this.gridMat.setProperty("warn",r.ZERO),void this.gridMat.setProperty("select",r.ZERO);var i=Math.ceil(e[0]%2),n=Math.ceil(e[1]%2),o=1==i?Math.floor(.5*v.x+t.x/v.size):Math.round(.5*v.x+t.x/v.size),s=1==n?Math.floor(.5*v.y+t.y/v.size):Math.round(.5*v.y+t.y/v.size);this.gizmo.setPosition((o+.5*(i-v.x))*v.size,(s+.5*(n-v.y))*v.size);var a=Math.floor(e[0]/2),l=Math.floor(e[1]/2);if(C.set(o-a,o+a+1*i,s-l,s+l+1*n),C.x<0||C.y>v.x)return this.gridMat.setProperty("warn",C.multiplyScalar(.1)),void this.gridMat.setProperty("select",r.ZERO);var u=this.checkCollider();if(u)return this.item.isDelete?(this.deleteItem(u),this.gridMat.setProperty("warn",C.set(u[0],u[1],u[2],u[3]).multiplyScalar(.1))):this.item.isRotate?(this.isEnd&&this.rotateItem(u),this.gridMat.setProperty("warn",r.ZERO)):this.gridMat.setProperty("warn",C.multiplyScalar(.1)),void this.gridMat.setProperty("select",C.set(u[0],u[1],u[2],u[3]).multiplyScalar(.1));if((this.item.isBrush||this.isEnd)&&!this.item.isDelete&&!this.item.isRotate){var h=c(this.item.sp.node);this.buildItem(this.gizmo.position,C,h)}this.gridMat.setProperty("select",C.multiplyScalar(.1)),this.gridMat.setProperty("warn",r.ZERO)},e.rotateItem=function(t){var e=t[1]-t[0],i=t[3]-t[2],n=t[4];n&&(_.set(n.scale),e>=i?_.x*=-1:_.y*=-1,n.setScale(_))},e.deleteItem=function(t){C.set(t[0],t[1],t[2],t[3]);for(var e=C.x;e<C.y;e++)for(var i=C.z;i<C.w;i++)this.colliderMap[e][i]=null;var n=t[4];n&&(this.mapData.delete(n),n.destroy())},e.setItem=function(t,e){e.parent=this.outPut,d.setMapItem(t,e),C.set(t[1],t[2],t[3],t[4]),this.mapData.set(e,[C.x,C.y,C.z,C.w]);for(var i=C.x;i<C.y;i++)for(var n=C.z;n<C.w;n++)this.colliderMap[i][n]=[C.x,C.y,C.z,C.w,e]},e.buildItem=function(t,e,i,n){void 0===n&&(n=[1,1]),i.setScale(n[0],n[1]),i.parent=this.outPut;var r=this.isPlayer?d.playerOffset:0;i.setPosition(t.x,t.y+r),this.mapData.set(i,[e.x,e.y,e.z,e.w]);for(var o=e.x;o<e.y;o++)for(var s=e.z;s<e.w;s++)this.colliderMap[o][s]=[e.x,e.y,e.z,e.w,i]},e.checkCollider=function(){for(var t=C.x;t<C.y;t++)for(var e=C.z;e<C.w;e++){var i=this.colliderMap[t][e];if(i)return i}return null},e.onTouchStart=function(t){var e=t.touch.getID();if(null==this.touchID){this.touchID=e,this.isEnd=!1,t.getUILocation(w);var i=this.getUIpos(w);if(this.item.isDraw)return this.dis=this.lineLength,void this.clearLine();this.isPlayer=-1!=this.item.name.indexOf("player");var n=v.safeY*v.size*.5;if(i.y<n&&i.y>75-n){if(this.item.isDraw)return this.dis=this.lineLength,void this.clearLine();this.changeGizmo(),this.setGridSelect(i,this.item.grid)}else h.emit(m.Toast,y.gameText.map.outMap),this.setGridSelect()}},e.onTouchMove=function(t){var e=t.touch;if(e.getID()==this.touchID){t.getUILocation(w);var i=this.getUIpos(w),n=v.safeY*v.size*.5;if(i.y<n&&i.y>75-n){if(this.item.isDraw)return void this.drawLine(e,i);this.setGridSelect(i,this.item.grid)}else this.setGridSelect()}},e.onTouchEnd=function(t){if(t.touch.getID()==this.touchID&&(this.touchID=null,this.isEnd=!0,!this.item.isDraw)){t.getUILocation(w);var e=this.getUIpos(w),i=v.safeY*v.size*.5;e.y<i&&e.y>75-i&&this.setGridSelect(e,this.item.grid),this.gizmo.setPosition(-1e3,-1e3),this.setGridSelect()}},e.drawLine=function(t,e){if(t.getDelta(b),this.dis+=Math.abs(b.x)+Math.abs(b.y),this.dis>this.lineLength){0==this.points.length?this.gc.moveTo(e.x,e.y):(this.gc.lineTo(e.x,e.y),this.gc.stroke());var i=[g.fixedTo(e.x),g.fixedTo(e.y)];this.points.push(i),this.dis=0}},e.getUIpos=function(t){return _.set(t.x,t.y),this.trans.convertToNodeSpaceAR(_,_),_},e.changeGizmo=function(){var t=this.gizmo.getComponent(p);t.color=this.item.sp.color,t.spriteFrame=this.item.sp.spriteFrame,this.gizmo.getComponent(f).setContentSize(this.item.size)},e.clearLine=function(){this.gc.clear(),this.points.length=0},t}()),e._RF.pop()}}})),System.register("chunks:///_virtual/EditorView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Main.ts","./DataMgr.ts","./ResMgr.ts","./BaseView.ts","./FileMgr.ts","./EditorMgr.ts","./MapItem.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_,C,M,T,S,P,E,x,L,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,u=t.Prefab,c=t.Label,h=t.Node,p=t.director,f=t.instantiate,d=t.sys,g=t.Toggle,m=t.Sprite,y=t.UITransform,v=t.Layers,w=t.UIOpacity},function(t){b=t.events,_=t.topStates,C=t.default,M=t.ui},function(t){T=t.Main},function(t){S=t.DataMgr},function(t){P=t.default},function(t){E=t.BaseView},function(t){x=t.FileMgr},function(t){L=t.EditorMgr},function(t){D=t.MapItem}],execute:function(){var R,A,I,B,V,k,z,G,F,N,O,U,H,j,W,J,K,Y,q,Z,X;a._RF.push({},"cc105lphS9M2q4YqwLWMx36","EditorView",void 0);var Q=l.ccclass,$=l.property,tt=l.disallowMultiple,et=l.help;t("EditorView",(R=Q("EditorView"),A=tt(!0),I=et("http://learncocos.com"),B=$({type:u,displayOrder:0,group:"components"}),V=$({type:u,displayOrder:0,group:"components"}),k=$(c),z=$(h),G=$(h),F=$(h),N=$(h),O=$(h),R(U=A(U=I((j=e((H=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"ToggleView",j,r(e)),n(e,"BuildView",W,r(e)),n(e,"fileName",J,r(e)),n(e,"toggleNode",K,r(e)),n(e,"tabBtns",Y,r(e)),n(e,"saveBtn",q,r(e)),n(e,"loadBtn",Z,r(e)),n(e,"clearBtn",X,r(e)),e._EditorMgr=null,e.fileMgr=null,e._fileName=null,e._currentIndex=0,e._buildItems=[[],[],[]],e.items=new Map,e._toggle=null,e}i(e,t);var a=e.prototype;return a.onEnable=function(){p.emit(b.changeTop,_.hideAll),p.emit(b.paperOcacity,160),p.on(b.startCustom,this.onClose,this)},a.onDisable=function(){this._EditorMgr.unRegisterEvents(),p.on(b.startCustom,this.onClose,this)},a.init=function(){this.initScene(),this.initObjects()},a.editMap=function(t){this.init(),this.initLevel(t)},a.goBack=function(){var t=o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onClose(),t.next=3,P.ins.getUI(M.BuildView);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.onClose=function(){this._EditorMgr.clear(),t.prototype.close.call(this)},a.initScene=function(){var t=o(s().mark((function t(){var e,i,n,r,o,a=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._EditorMgr||(this._EditorMgr=new L,e=this.node.getComponent(y),i=new h("OutputNode"),n=this.node.getChildByName("OutputLayer")||this.node,i.parent=n,(r=new h("gizmo")).layer=v.Enum.UI_2D,r.parent=this.node,r.addComponent(m),r.addComponent(w).opacity=170,o=T.ins.grid.mat,this._EditorMgr.init(r,o,e,i),this.toggleNode=this.toggleNode,this._fileName=this.fileName,this.loadBtn.active=!1,this.saveBtn.on(h.EventType.TOUCH_END,this.saveMap,this),this.clearBtn.on(h.EventType.TOUCH_END,(function(){a._EditorMgr.clear()}),this),this.tabBtns.forEach((function(t,e){t.on(h.EventType.TOUCH_END,(function(){a.changeTab(e)}),a)}))),this._EditorMgr.registerEvents(),this._fileName.string=S.getId(S.currentMap);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.loadFile=function(){var t=o(s().mark((function t(){var e,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.fileMgr||(this.fileMgr=new x),t.next=3,this.fileMgr.loadFile();case 3:(e=t.sent)||p.emit(b.Toast,C.gameText.map.loadFail,1),i=JSON.parse(e),this.initLevel(i);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.initLevel=function(t){var e=t.mapData;if(e){var i=e.length;if(i>0){this._EditorMgr.clear();for(var n=0;n<i;n++){var r=e[n],o=r[0],s=this.items.get(o);if(s){var a=f(s.sp.node);this._EditorMgr.setItem(r,a)}}var l=t.points.length;if(l>0)for(n=0;n<l;n++){var u=t.points[n];0==n?this._EditorMgr.gc.moveTo(u[0],u[1]):(this._EditorMgr.gc.lineTo(u[0],u[1]),this._EditorMgr.gc.stroke())}p.emit(b.Toast,C.gameText.map.loadSuccess,1)}else p.emit(b.Toast,C.gameText.map.loadFail,1)}},a.saveMap=function(){var t=this._EditorMgr.mapData,e={},i=this._fileName.string;e.id=i,e.points?e.points.length=0:e.points=[];var n=e.mapData=[];if(t.forEach((function(t,e){var i=[e.name,t[0],t[1],t[2],t[3],e.scale.x,e.scale.y];n.push(i)})),this._EditorMgr.points.length>0&&(e.points=this._EditorMgr.points.concat()),n.length>0){if(S.MapData=e,d.platform==d.Platform.DESKTOP_BROWSER){var r=JSON.stringify(e);this.saveAsFile(r,i)}}else p.emit(b.Toast,C.gameText.map.saveFail)},a.saveAsFile=function(t,e){this.fileMgr||(this.fileMgr=new x),this.fileMgr.saveFile(t,e),p.emit(b.Toast,C.gameText.map.saveFile+e)},a.SwithItem=function(t){var e=this.items.get(t);this._EditorMgr.item=e,p.emit(b.Toast,C.gameText.map.currentItem+t,.3)},a.initObjects=function(){this._buildItems[0].length>0||(this.initToggle(C.gameText.tools.delete),this.initToggle(C.gameText.tools.rotate),this.initToggle(C.gameText.tools.line),this.addToggles(P.ins.buildPrefabs))},a.changeTab=function(t){var e=this;t!=this._currentIndex&&0!=this._buildItems[t].length&&(this._buildItems[this._currentIndex].forEach((function(t){t.active=!1})),this._buildItems[t].forEach((function(t,i){t.active=!0,0==i&&(t.getComponent(g).isChecked=!0,e.SwithItem(t.name))})),this._currentIndex=t)},a.initToggle=function(t,e,i){var n=f(this.ToggleView);n.name=t,n.parent=this.toggleNode;var r=n.getComponent(D);return r.init(t,e,i),this.items.set(t,r),n.on("toggle",this.onToggleClick,this),n},a.addToggles=function(t){var e=this;t.forEach((function(t,i){t.forEach((function(t,n){var r=t,o=r.data.name,s=f(r),a=s.getComponent(m),l=e.initToggle(o,s.getComponent(y).contentSize,a);e._buildItems[i].push(l),s.destroy(),i==e._currentIndex?0==n&&e.scheduleOnce((function(){l.getComponent(g).isChecked=!0,e.SwithItem(l.name)})):l.active=!1}))}))},a.onToggleClick=function(t){this._toggle!=t&&(this._toggle=t,this.SwithItem(t.node.name))},e}(E)).prototype,"ToggleView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(H.prototype,"BuildView",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(H.prototype,"fileName",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(H.prototype,"toggleNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(H.prototype,"tabBtns",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=e(H.prototype,"saveBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(H.prototype,"loadBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(H.prototype,"clearBtn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=H))||U)||U)||U)),a._RF.pop()}}})),System.register("chunks:///_virtual/EnemyAI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./FSM.ts","./PathFindMgr.ts","./GridConfig.ts","./Tools.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.Node,o=t.Vec2,s=t.director,a=t.RigidBody2D,l=t.PhysicsSystem2D,u=t.ERaycast2DType},function(t){c=t.events,h=t.collisions},function(t){p=t.GameConfig},function(t){f=t.Global},function(t){d=t.default},function(t){g=t.PathFindMgr},function(t){m=t.GridConfig},function(t){y=t.Tools}],execute:function(){var v,w;i._RF.push({},"24c7f37mUhMEZ1aEU8q8EjR","EnemyAI",void 0);var b=h.DEFAULT,_=n.ccclass,C=(n.property,{Forward:"Forward",Idle:"Idle",Atk:"Atk"});t("default",_("EnemyAI")(((w=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).speed=10,e.atk=void 0,e.rndTime=.5,e.target=new r,e.roleAngel=0,e.cd=1,e.skip=0,e.rigid=void 0,e.path=[],e.targetPos=[0,0],e.lineRigid=null,e._forward=new o,e._speed=new o,e._moveNext=!1,e.pos1=new o,e.pos2=new o,e}e(i,t);var n=i.prototype;return n.onEnable=function(){s.on(c.gameWin,this.stopAI,this)},n.onDisable=function(){s.off(c.gameWin,this.stopAI,this),this.stopAI()},n.stopAI=function(){this.paused=!0,this.RemoveAllState(),this._speed.x=this._speed.y=0,this.rigid.linearVelocity=o.ZERO,this.path.length=0,this.target=null},n.initFSM=function(){this.addStates(C),this.speed=p.enemySpeed*p.timeScale,this.rigid||(this.rigid=this.node.getComponent(a)),this.target=y.getCloestNode(this.node,f.players),this.path.length=0,this.paused=!1,this.changeState(C.Forward)},n.targetPlayer=function(){this.target||(this.target=y.getCloestNode(this.node,f.players)),this.targetPos=[this.target.position.x,this.target.position.y],y.getDistance(this.node.position,this.targetPos)>2*m.size&&(this.path=g.ins.getPath(this.node.position,this.target.position),this.path.length>0&&(this.targetPos=this.path.shift())),this.rotateRole(this.targetPos)},n.checkPath=function(){this.path.length>0?(this._moveNext&&(this.targetPos=this.path.shift(),this._moveNext=!1),this.rotateRole(this.targetPos)):this.targetPlayer()},n.onForwardEnter=function(){f.start&&(this.rigid.wakeUp(),this.cd=.25+.4*Math.random(),this.checkPath())},n.onForwardUpdate=function(){f.start&&(this.targetPos||this.changeState(C.Forward),y.getDistance(this.node.position,this.targetPos)<8&&(this._moveNext=!0,this.changeState(C.Forward)),this.skip++,this.skip>3&&(this.rotateRole(this.targetPos),this.skip=0),this.run(this.dt,this.speed))},n.run=function(t,e){if(this.pos1.set(this.node.worldPosition.x,this.node.worldPosition.y),o.multiplyScalar(this._speed,this._forward,e*t*60),this.pos2.x=this.pos1.x+this._speed.x*p.pullRange,this.pos2.y=this.pos1.y+this._speed.y*p.pullRange,this.checkRay(this.pos1,this.pos2)){var i=p.pullStrenth*(8*Math.random()-4),n=p.pullStrenth*(1+1.1*Math.random());if(this._speed.set(i,n),this.lineRigid.applyLinearImpulseToCenter(this._speed,!0),this.duration>this.cd)return void this.changeState(C.Atk)}else this.rigid.linearVelocity=this._speed},n.onAtkEnter=function(){f.start&&(this.rigid.wakeUp(),this.rigid.linearVelocity=o.ZERO,this.rotateRole([this.target.position.x,this.target.position.y]),this._speed.x=-(200*Math.random()+100)*this._forward.x,this._speed.y=-(200*Math.random()+100)*this._forward.y,this.rigid.applyForceToCenter(this._speed,!0),this.cd=.08+.08*Math.random())},n.onAtkUpdate=function(){f.start&&this.duration>=this.cd&&(this.target=y.getRandomTarget(f.players),this.rotateRole([this.target.position.x,this.target.position.y]),this._speed.x=150*this._forward.x*(.5+.3*Math.random()),this._speed.y=150*this._forward.y*(.5+.3*Math.random()),this.rigid.applyForceToCenter(this._speed,!0),this.changeState(C.Forward))},n.checkRay=function(t,e){var i=l.instance.raycast(t,e,u.Closest,b);return 0!=i.length&&(this.lineRigid||(this.lineRigid=i[0].collider.node.getComponent(a)),!0)},n.rotateRole=function(t){this._forward.set(t[0]-this.node.position.x,t[1]-this.node.position.y).normalize(),this.roleAngel=Math.atan2(this._forward.x,this._forward.y)/.017453292222222222,this.node.angle=this.roleAngel},i}(d)).STATE=C,v=w))||v),i._RF.pop()}}})),System.register("chunks:///_virtual/EnemyMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./PoolMgr.ts","./EnemyAI.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.Animation,o=t.director,s=t.Vec3,a=t.Component},function(t){l=t.events},function(t){u=t.GameConfig},function(t){c=t.Global},function(t){h=t.PoolMgr},function(t){p=t.default}],execute:function(){var f;i._RF.push({},"34751fAhM9CCLg2Ea1rPaYJ","EnemyMgr",void 0);var d=n.ccclass;n.property,t("EnemyMgr",d("EnemyMgr")(f=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).anm=void 0,e.index=0,e.pos=new s,e}e(i,t);var n=i.prototype;return n.start=function(){this.anm=this.getComponent(r)},n.onEnable=function(){o.on(l.finishDraw,this.initEnemies,this)},n.onDisable=function(){o.off(l.finishDraw,this.initEnemies,this),this.unschedule(this.stopAnm),this.anm.pause()},n.initEnemies=function(){this.anm.play();var t=.1*u.levelEnemies;this.scheduleOnce(this.stopAnm,t),this.schedule(this.spawnEnemy,.1,u.levelEnemies)},n.stopAnm=function(){this.anm.stop()},n.getIndexPos=function(){this.index>3&&(this.index=0);var t=this.node.position,e=this.index%2*60-30+t.x,i=60*Math.floor(this.index/2)-30+t.y;return this.pos.set(e,i),this.index++,this.pos},n.spawnEnemy=function(){h.ins.getNode("BlackChick",c.bricksLayer,this.getIndexPos()).getComponent(p).initFSM()},i}(a))||f),i._RF.pop()}}})),System.register("chunks:///_virtual/EnergyMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Tools.ts","./ResMgr.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass,s=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){l=t.cclegacy,u=t._decorator,c=t.Label,h=t.tween,p=t.Component,f=t.director},function(t){d=t.Key,g=t.events,m=t.ui},function(t){y=t.GameConfig},function(t){v=t.load,w=t.Tools,b=t.save},function(t){_=t.default}],execute:function(){var C,M,T,S,P,E,x,L;l._RF.push({},"f2cd7T7zp1DoqBFggKq4q3I","EnergyMgr",void 0);var D=u.ccclass,R=u.property;t("EnergyMgr",(C=D("EnergyMgr"),M=R(c),T=R(c),C(((L=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"energyLabel",E,r(e)),n(e,"timerLabel",x,r(e)),e._e=0,e._time=0,e}i(e,t);var l=e.prototype;return l.start=function(){e.ins=this;var t=Number(v(d.LastTime)),i=w.getDay();if(this.timerLabel.string="",t){var n=Number(v(d.Energy));n<y.startEnergy&&this.startTimer(),i>t&&(n<y.startEnergy&&(n=y.startEnergy),b(d.Energy,n),b(d.LastTime,i)),this.energyNum=n}else b(d.LastTime,i),b(d.Energy,y.startEnergy),this.energyNum=y.startEnergy},l.changeEnergy=function(t){void 0===t&&(t=!1);var i=Number(v(d.Energy));if(t){i+=y.addEnergy;var n=this.getComponent(e);return h(n).to(y.addEnergy/10,{energyNum:i}).start(),b(d.Energy,i),i>=y.startEnergy&&(this.timerLabel.string="",this.unschedule(this.updateTimer)),!0}return i-y.levelEnergy<0?(this.showEnergy(),!1):(i-=y.levelEnergy,b(d.Energy,i),this.energyLabel.string=""+i,i<y.startEnergy&&this.startTimer(),!0)},l.startTimer=function(){this.timerLabel.string="",this.schedule(this.updateTimer,1)},l.updateTimer=function(){if(this._time++,this._time>y.recoveryEnergyTime){this._time=0;var t=Number(v(d.Energy));return t++,b(d.Energy,t),this.energyLabel.string=""+t,void(t>y.startEnergy&&(this.timerLabel.string="",this.unschedule(this.updateTimer)))}var e=y.recoveryEnergyTime-this._time,i=Math.floor(e/60),n=e-60*i;this.timerLabel.string=i+":"+n},l.showEnergy=function(){var t=s(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.emit(g.Toast,"鸡蛋不足"),t.next=3,_.ins.getUI(m.MoneyView);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o(e,[{key:"energyNum",get:function(){return this._e},set:function(t){this._e=t,this.energyLabel.string=Math.floor(this._e)+""}}]),e}(p)).ins=null,E=e((P=L).prototype,"energyLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(P.prototype,"timerLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P))||S)),l._RF.pop()}}})),System.register("chunks:///_virtual/Enums.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,n=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t._decorator,s=t.CCString,a=t.SpriteFrame,l=t.Color,u=t.Prefab,c=t.JsonAsset,h=t.AudioClip,p=t.SpriteAtlas,f=t.Material}],execute:function(){var d,g,m,y,v,w,b,_,C,M,T,S,P,E,x,L,D,R,A,I,B,V,k,z,G,F,N,O,U,H,j,W;t("gameText",(function(){})),r._RF.push({},"39f4cB5mBBD+L0+wGMDYvJe","Enums",void 0);var J=o.ccclass,K=o.property,Y=(t("adConfig",(d=J("adConfig"),g=K({type:s}),m=K({type:s}),y=K({type:s}),v=K({type:s}),d((_=e((b=function(){n(this,"platform",_,this),n(this,"id",C,this),n(this,"bannerId",M,this),n(this,"intersitialId",T,this),n(this,"videoId",S,this),n(this,"customId",P,this)}).prototype,"platform",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"platform"}}),C=e(b.prototype,"id",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=e(b.prototype,"bannerId",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=e(b.prototype,"intersitialId",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=e(b.prototype,"videoId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=e(b.prototype,"customId",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=b))||w)),t("shareContent",J("shareContent")((L=e((x=function(){n(this,"shareId",L,this),n(this,"shareLink",D,this),n(this,"shareText",R,this)}).prototype,"shareId",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=e(x.prototype,"shareLink",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=e(x.prototype,"shareText",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"分享标题"}}),E=x))||E));t("penConfig",(A=J("penConfig"),I=K(a),B=K(l),A((z=e((k=function(){n(this,"penName",z,this),n(this,"penSF",G,this),n(this,"penColor",F,this)}).prototype,"penName",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),G=e(k.prototype,"penSF",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(k.prototype,"penColor",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),V=k))||V)),t("shareConfig",(N=J("shareConfig"),O=K({type:Y}),N((j=e((H=function(){n(this,"platform",j,this),n(this,"sharePics",W,this)}).prototype,"platform",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"platform"}}),W=e(H.prototype,"sharePics",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=H))||U)),t("collisions",{DEFAULT:1,player:2,trap:4,water:8,brick:16,enemy:32}),t("ui",{HomeBtnView:{name:"HomeBtnView",layer:0,clear:!1},EditorView:{name:"EditorView",layer:0,clear:!0},BuildView:{name:"BuildView",layer:0,clear:!0},GameView:{name:"GameView",layer:3,clear:!1},BuildCardView:{name:"BuildCardView",layer:1,clear:!1},TopView:{name:"TopView",layer:4,clear:!1},ResultView:{name:"ResultView",layer:3,clear:!1},HomeView:{name:"HomeView",layer:0,clear:!1},TouchView:{name:"TouchView",layer:5,clear:!1},StoreView:{name:"StoreView",layer:4,clear:!1},MoneyView:{name:"MoneyView",layer:5,clear:!1},CustomView:{name:"CustomView",layer:5,clear:!0},AdView:{name:"AdView",layer:5,clear:!1},ToastView:{name:"ToastView",layer:6,clear:!1}}),t("events",{startCustom:"startCustom",restartGame:"restartGame",gameStart:"gameStart",initTrap:"initTrap",clearMap:"clearMap",changePen:"changePen",closeGame:"closeGame",initLevel:"initLevel",gameWin:"gameWin",startDraw:"startDraw",finishDraw:"finishDraw",showResult:"showResult",buildMap:"buildMap",paperOcacity:"paperOcacity",editMap:"editMap",playMap:"playMap",rollBg:"rollBg",changeTop:"changeTop",catWatch:"catWatch",Toast:"toast",Anm:"anm"}),t("topStates",{showHome:"showHome",showSetting:"showSetting",showEgg:"showEgg",showClock:"showClock",showStore:"showStore",hideStore:"hideStore",showAll:"showAll",hideAll:"hideAll"}),t("anms",{cry:"cry",idle:"idle",hurt:"hurt",happy:"happy"}),t("default",function(){function t(){}return i(t,null,[{key:"gameText",get:function(){return this.cn}}]),t}()).cn={map:{saveFile:"保存文件成功，文件名：",currentItem:"当前物件 ",currentLevel:"当前关卡 ",saveFail:"保存失败",loadSuccess:"加载成功",saveSuccess:"保存失败",loadFail:"加载成功",outMap:"超出地图边界"},game:{fail:"是不是油饼！",noTutorial:"本关没有辅助线",win:"大吉大利！今晚吃鸡！"},home:{moreGame:"即将开放"},tools:{brick:"brick",delete:"删除工具",rotate:"旋转工具",line:"画线工具"}},t("Effects",{Star:"StarEffect"}),t("Key",{MapData:"MapData",CurrentPen:"CurrentPen",Sound:"Sound",Bgm:"Bgm",Pens:"Pens",Pause:"Pause",Timer:"Timer",Level:"Level",Shuffle:"Shuffle",Frost:"Frost",Undo:"Undo",Energy:"Energy",Star:"Star",LastTime:"LastTime"}),t("Props",{Scenes:"Scenes",Layers:"Layers",Comps:"Components",ShareConfig:"ShareConfig",Setting:"Setting",View:"View",AdConfig:"AdConfig",Ad:"Advertisement"}),t("Clips",{hurt:"hurt",happy:"happy",bgm:"bgm",photo:"photo",counter:"counter",btn:"btn",touch:"touch",gold:"gold",reward:"reward",merge:"merge",win:"win",lose:"lose"}),t("Assets",{BrickPrefab:{type:u,path:"Preload/Prefabs/Brick"},UiPrefab:{type:u,path:"Preload/Prefabs/UI"},Json:{type:c,path:"Preload/Jsons/"},Sound:{type:h,path:"Preload/Clips/"},Atlas:{type:p,path:"Preload/Atlas/"},Material:{type:f,path:"Preload/Materials/"}}),r._RF.pop()}}})),System.register("chunks:///_virtual/FileMgr.ts",["cc"],(function(t){var e,i,n;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.sys}],execute:function(){e._RF.push({},"97508PoUZNAQ6tcvvL+CdJG","FileMgr",void 0),i.ccclass,i.property,t("FileMgr",function(){function t(){}var e=t.prototype;return e.loadFile=function(){return new Promise((function(t,e){var i=document.createElement("input");document.body.appendChild(i),i.type="file",i.accept=".json",i.onchange=function(e){var i=e.target.files;if(0!=i.length){var n=new FileReader;n.onload=function(e){var i=e.target.result;t&&t(i)},n.readAsText(i[0],"UTF-8")}else t&&t(null)},i.click()}))},e.saveFile=function(t,e){if(n.isBrowser){var i=new Blob([t],{type:"application/json"}),r=document.createElement("a");r.download=e,r.innerHTML="Download File",null!=window.webkitURL?r.href=window.webkitURL.createObjectURL(i):(r.href=window.URL.createObjectURL(i),r.style.display="none",document.body.appendChild(r)),r.click()}},t}()),e._RF.pop()}}})),System.register("chunks:///_virtual/FSM.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,r=t.Component}],execute:function(){n._RF.push({},"6226fWbarZFzLQ7qc9Js8uH","FSM",void 0),t("default",function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).stateList=[],e._currentState="",e._preState="",e.duration=0,e.dt=0,e.paused=!1,e}e(n,t);var r=n.prototype;return r.addState=function(t){null==this.getState(t)?(this.stateList.push(t),1==this.stateList.length&&(this._currentState=t)):console.warn("FSM: current state ["+t+"] has been added")},r.addStates=function(t){var e=this;Object.keys(t).forEach((function(i){e.addState(t[i])}))},r.removeState=function(t){var e=this.getState(t);null!=e?this.stateList.splice(this.stateList.indexOf(e),1):console.warn("FSM:nthe state ["+t+"] does not exist")},r.getState=function(t){return-1!==this.stateList.indexOf(t)?t:null},r.resetState=function(){this.changeState()},r.changeState=function(t){void 0===t&&(t=this._preState);var e=this.getState(t);null!=e?(null!=this._currentState&&this["on"+this._currentState+"Exit"]&&this["on"+this._currentState+"Exit"](this._currentState,this._preState),this._preState=this._currentState,this._currentState=e,this.duration=0,this["on"+this._currentState+"Enter"]&&this["on"+this._currentState+"Enter"](this._currentState,this._preState)):console.log("FSM: current state ["+t+"] is not in state")},r.update=function(t){this.paused||0==t||null!=this._currentState&&(this.dt=t,this.duration+=t,this["on"+this._currentState+"Update"]&&this["on"+this._currentState+"Update"](this._currentState,this._preState))},r.RemoveAllState=function(){null!=this._currentState&&(this["on"+this._currentState+"Exit"]&&this["on"+this._currentState+"Exit"](this._currentState,this._preState),this._currentState=null),this.stateList.length=0},i(n,[{key:"currentState",get:function(){return this._currentState}},{key:"preState",get:function(){return this._preState}}]),n}(r)),n._RF.pop()}}})),System.register("chunks:///_virtual/FullscreenCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(t){var e,i,n,r,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.Widget,o=t.Component},function(t){s=t.Global}],execute:function(){var a;i._RF.push({},"a5930qwTIRAN7zDU5sxJM69","FullscreenCtrl",void 0);var l=n.ccclass;n.property,t("FullscreenCtrl",l("FullscreenCtrl")(a=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.start=function(){if(s.screenRatio>=1.1){var t=this.node.getComponent(r);t&&(t.isAlignTop&&(t.top=0),t.isAlignBottom&&(t.bottom=0))}},i}(o))||a),i._RF.pop()}}})),System.register("chunks:///_virtual/GameConfig.ts",["cc","./Global.ts","./PathFindMgr.ts","./GridConfig.ts"],(function(t){var e,i,n,r;return{setters:[function(t){e=t.cclegacy},function(t){i=t.Global},function(t){n=t.PathFindMgr},function(t){r=t.GridConfig}],execute:function(){e._RF.push({},"94d5ffa3EJAJ6Um3/bYwvGN","GameConfig",void 0);var o=r.x*r.size*.5,s=r.y*r.size*.5,a=t("GameConfig",function(){function t(){}return t.setMapItem=function(t,e,i){void 0===i&&(i=!1);var a=-1!=e.name.indexOf("player"),l=-1!=e.name.indexOf("enemy");if(i&&!a&&!l)for(var u=t[1];u<t[2];u++)for(var c=t[3];c<t[4];c++)n.ins.setNode([u,c]);e.setScale(t[5],t[6]),e.angle=0;var h=a?this.playerOffset:0,p=.5*(t[1]+t[2])*r.size-o,f=.5*(t[3]+t[4])*r.size-s;e.setPosition(p,f+h)},t.getTimer=function(t){var e=6+Math.floor(t/3)+Math.floor(t/5);return e>14&&(e=14),e},t.setStrenth=function(e){this.pullStrenth=1+.4*Math.floor(e/3)+1.4*Math.floor(e/11),t.timeScale>1&&(this.pullStrenth*=1.4*t.timeScale),this.pullStrenth>13*t.timeScale&&(this.pullStrenth=13*t.timeScale),this.pullRange=2+.3*Math.floor(e/4)+.5*Math.floor(e/10),this.pullRange>12&&(this.pullRange=12),this.levelEnemies=1+Math.floor(e/6)+Math.floor(e/15),this.levelEnemies>10&&(this.levelEnemies=10)},t.getRank=function(){var t=Math.floor(i.time/5);return t>3&&(t=3),t},t}());a.maxShareLength=2048,a.pullRange=2,a.pullStrenth=2,a.levelEnemies=2,a.enemySpeed=8,a.penConfigs=void 0,a.lineWidth=18,a.gravity=-500,a.timeScale=1,a.tutorialLineLength=40,a.gameLineLength=18,a.skinList=["cat"],a.addEnergy=20,a.levelEnergy=5,a.recoveryEnergyTime=300,a.startEnergy=25,a.maxLevel=10,a.playerOffset=-23,a.startShuffle=2,a.startFrost=1,a.startUndo=3,e._RF.pop()}}})),System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./Astar.ts","./lineLogic.ts","./GridConfig.ts","./Tools.ts","./PathFindMgr.ts","./PoolMgr.ts","./ResMgr.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_,C,M,T,S,P,E,x,L,D,R,A,I,B,V;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t.Vec2,a=t.Vec3,l=t.PhysicsSystem2D,u=t.UITransform,c=t.Node,h=t.RigidBody2D,p=t.ERigidBody2DType,f=t.PhysicsGroup,d=t.Graphics,g=t.Color,m=t.input,y=t.Input,v=t.director,w=t.PolygonCollider2D,b=t.ERaycast2DType,_=t.Component,C=t.Animation},function(t){M=t.events,T=t.Key,S=t.collisions,P=t.ui},function(t){E=t.GameConfig},function(t){x=t.Global},function(t){L=t.buildGrid},function(t){D=t.lineLogic},function(t){R=t.GridConfig},function(t){A=t.Tools},function(t){I=t.PathFindMgr},function(t){B=t.PoolMgr},function(t){V=t.default}],execute:function(){o._RF.push({},"36bbee5djtCuIsr78qHGfho","GameMgr",void 0);var k=new s,z=new s,G=new s,F=new a,N=S.trap+S.player+S.brick+S.water;t("GameMgr",function(t){function o(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).tutorGc=null,e.gc=null,e.touchID=null,e.dis=0,e.line=null,e.trans=null,e.rigid=null,e.polys=[],e.points=[],e.lineLength=E.gameLineLength/E.timeScale,e._inited=!1,e.Physics=void 0,e}e(o,t);var _=o.prototype;return _.init=function(){this._inited||(I.ins.init(L(R.x,R.y)),this.Physics=l.instance,this.trans=x.layer[1].getComponent(u),this.initTutorialLine(),this.initGameLine(),this._inited=!0),this.changePen(x.currentPen),this.regEnvents(),this.resetLine()},_.changePen=function(t){var e=E.penConfigs[t],i=e.penName,n=V.ins.getMat(i);this.gc.material=n,this.gc.strokeColor=e.penColor},_.initGameLine=function(){this.line=new c("lineNodeLayer"),this.lineLength*=x.screenRatio,this.line.parent=x.layer[2],this.rigid=this.line.addComponent(h),this.rigid.type=p.Dynamic,this.rigid.gravityScale=1.8,this.rigid.linearDamping=0,this.rigid.angularDamping=0,this.rigid.group=f.DEFAULT,this.gc=this.line.addComponent(d),this.gc.lineJoin=0,this.gc.lineCap=0,this.gc.lineWidth=E.lineWidth},_.initTutorialLine=function(){var t=new c("tutoriallineNodeLayer");t.parent=x.layer[2],this.tutorGc=t.addComponent(d),this.tutorGc.lineJoin=0,this.tutorGc.lineCap=0,this.tutorGc.strokeColor=g.CYAN,this.tutorGc.lineWidth=E.lineWidth},_.regEnvents=function(){m.on(y.EventType.TOUCH_START,this.onTouchStart,this),m.on(y.EventType.TOUCH_MOVE,this.onTouchMove,this),m.on(y.EventType.TOUCH_END,this.onTouchEnd,this),m.on(y.EventType.TOUCH_CANCEL,this.onTouchEnd,this),v.on(M.changePen,this.changePen,this)},_.unRegEvents=function(){m.off(y.EventType.TOUCH_START,this.onTouchStart,this),m.off(y.EventType.TOUCH_MOVE,this.onTouchMove,this),m.off(y.EventType.TOUCH_END,this.onTouchEnd,this),m.off(y.EventType.TOUCH_CANCEL,this.onTouchEnd,this),v.off(M.changePen,this.changePen,this),this.rigid.sleep()},_.getUIpos=function(t){return F.set(t.x,t.y),this.trans.convertToNodeSpaceAR(F,F),F},_.resetLine=function(){if(this.Physics.gravity=k.set(0,0),x.isDraw=!1,0!=this.points.length||0!=this.polys.length){this.rigid.linearVelocity=s.ZERO,this.rigid.angularVelocity=0,this.rigid.sleep(),this.points.length=0,this.line.setPosition(a.ZERO),this.line.angle=0;var t=this.polys.length;if(t>0)for(var e=0;e<t;e++)if(e<120){var i=this.polys[e];A.clearPoly(i)}else{var n=this.polys.pop();A.clearPoly(n),n.destroy()}this.gc.clear()}},_.onTouchStart=function(t){if(x.start&&!x.drawEnd){var e=t.touch,i=e.getID();if(null!=this.touchID){if(i!=this.touchID)return}else this.touchID=i;if(!x.isDraw){v.emit(M.startDraw,!0),x.isDraw=!0,this.resetLine(),e.getUILocation(k);var n=this.getUIpos(k);this.showTouch(n),this.dis=this.lineLength}}},_.onTouchMove=function(t){if(x.start&&!x.drawEnd){var e=t.touch;if(e.getID()==this.touchID&&(e.getDelta(k),this.dis+=Math.abs(k.x)+Math.abs(k.y),this.dis>=this.lineLength)){e.getUILocation(z);var i=this.getUIpos(z);0==this.points.length?this.checkPoint(z)||(this.gc.moveTo(i.x,i.y),this.storePoint(i)):this.checkRay(z,G)?this.onTouchEnd(t):(this.gc.lineTo(i.x,i.y),this.gc.stroke(),this.storePoint(i))}}},_.storePoint=function(t){G.set(z),D.pushPoints(this.points,[t.x,t.y]),this.dis=0},_.onTouchEnd=function(t){if(x.start&&!x.drawEnd){var e=t.touch;if(e.getID()==this.touchID){this.touchID=null,e.getUILocation(z);var i=this.getUIpos(z);this.showTouch(i),this.drawPhysic()}}},_.drawPhysic=function(){var t=this,e=this.points.length;if(e<=1)return v.emit(M.startDraw,!1),void(x.isDraw=!1);x.drawEnd=!0;for(var i=0,n=0;n<e-1;n++){if(i=0==n?1:n==e-2?2:0,!this.polys[n]){var r=this.line.addComponent(w);r.friction=0,this.polys[n]=r}var o=this.points[n],s=this.points[n+1];D.setPolyBox(this.polys[n],o,s,i)}x.isTutorial&&(x.isTutorial=!1,this.tutorGc.clear()),this.scheduleOnce((function(){t.rigid.wakeUp(),l.instance.gravity=z.set(0,E.gravity*E.timeScale),v.emit(M.finishDraw),v.emit(T.Timer,x.time)}))},_.showTouch=function(){var t=n(r().mark((function t(e){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.ins.getUI(P.TouchView);case 2:i=t.sent,e[0]?i.setPosition(e[0],e[1]):i.setPosition(e),i.getComponent(C).play(),this.scheduleOnce((function(){B.ins.putNode(i)}),1);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),_.checkPoint=function(t){return 0!=this.Physics.testPoint(t).length},_.checkRay=function(t,e){return 0!=this.Physics.raycast(e,t,b.Closest,N).length},i(o,null,[{key:"ins",get:function(){return this._ins||(this._ins=new o),this._ins}}]),o}(_))._ins=null,o._RF.pop()}}})),System.register("chunks:///_virtual/GameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./GameMgr.ts","./LevelMgr.ts","./PathFindMgr.ts","./PoolMgr.ts","./ResMgr.ts","./BaseView.ts","./ResultView.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_,C,M,T,S,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,u=t.Node,c=t.director,h=t.PhysicsSystem2D,p=t.Vec2,f=t.RigidBody2D},function(t){d=t.events,g=t.topStates,m=t.Key,y=t.default,v=t.ui},function(t){w=t.Global},function(t){b=t.GameMgr},function(t){_=t.LevelMgr},function(t){C=t.PathFindMgr},function(t){M=t.PoolMgr},function(t){T=t.default},function(t){S=t.BaseView},function(t){P=t.ResultView}],execute:function(){var E,x,L,D,R,A,I,B,V,k;a._RF.push({},"1abc79+ZcZMPqcXS4MUpRt1","GameView",void 0);var z=l.ccclass,G=l.property;t("GameView",(E=z("GameView"),x=G(u),L=G(u),D=G(u),E(((k=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"bricksLayer",I,r(e)),n(e,"playersLayer",B,r(e)),n(e,"btnsLayer",V,r(e)),e.pIndex=0,e.source=0,e.lineL=0,e}i(e,t);var a=e.prototype;return a.start=function(){e.ins=this},a.onEnable=function(){w.bricksLayer=this.bricksLayer,w.playersLayer=this.playersLayer,c.emit(d.changeTop,g.showClock),c.on(d.showResult,this.GameResult),c.on(d.restartGame,this.restartGame,this),c.on(d.clearMap,this.clearMap,this),c.on(d.startDraw,this.hideBtns,this),c.on(d.closeGame,this.goBack,this),c.on(d.startCustom,this.onClose,this)},a.GameResult=function(){var t=o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.ins.getUI(v.ResultView);case 2:t.sent.getComponent(P).init();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a.onDisable=function(){c.off(d.startDraw,this.hideBtns,this),c.off(d.clearMap,this.clearMap,this),c.off(d.showResult,this.GameResult),c.off(d.restartGame,this.restartGame,this),c.off(d.closeGame,this.goBack,this),c.off(d.startCustom,this.onClose,this),c.emit(m.Timer,0),b.ins.resetLine(),b.ins.unRegEvents(),w.isTutorial&&(w.isTutorial=!1,b.ins.tutorGc.clear()),w.start=!1,w.isDraw=!1,this.clearMap()},a.init=function(t,e){this.source=t,1==t&&(w.time=9),h.instance.gravity=p.ZERO,b.ins.init(),C.ins.clear(),_.ins.loadLevel(e)},a.hideBtns=function(t){this.btnsLayer.active=!t},a.restartGame=function(){_.ins.restartGame()},a.skipLevelBtn=function(){var e=this;t.prototype.showVideo.call(this,(function(){e.GameResult()}))},a.lineTipBtn=function(){var e=this;w.isDraw||(this.lineL=w.tutorialPoints.length,0!=this.lineL?t.prototype.showVideo.call(this,(function(){e.showTutorial()})):c.emit(d.Toast,y.gameText.game.noTutorial))},a.showTutorial=function(){w.start=!1,w.isTutorial=!0,b.ins.resetLine(),this.pIndex=0,this.unschedule(this.drawLine),this.schedule(this.drawLine,.06,this.lineL)},a.drawLine=function(){var t=w.tutorialPoints[this.pIndex];0==this.pIndex?(b.ins.tutorGc.moveTo(t[0],t[1]),b.ins.showTouch(t)):(b.ins.tutorGc.lineTo(t[0],t[1]),b.ins.tutorGc.stroke()),this.pIndex++,this.pIndex==this.lineL&&(w.start=!0,b.ins.showTouch(t),this.unschedule(this.drawLine))},a.clearMap=function(){c.emit(d.paperOcacity,55),b.ins.resetLine();for(var t=this.bricksLayer.children.length-1;t>=0;t--){var e=this.bricksLayer.children[0],i=e.getComponent(f);i&&(i.linearVelocity=p.ZERO,i.angularVelocity=0),M.ins.putNode(e)}for(t=this.playersLayer.children.length-1;t>=0;t--){var n=this.playersLayer.children[0],r=n.getComponent(f);r&&(r.linearVelocity=p.ZERO,r.angularVelocity=0),M.ins.putNode(n)}this.btnsLayer.active=!0},a.onClose=function(){t.prototype.close.call(this)},a.goBack=function(){t.prototype.close.call(this),0==this.source?M.ins.getNode("HomeView",w.layer[1]):T.ins.getUI(v.BuildView)},e}(S)).ins=null,I=e((A=k).prototype,"bricksLayer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(A.prototype,"playersLayer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(A.prototype,"btnsLayer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=A))||R)),a._RF.pop()}}})),System.register("chunks:///_virtual/Global.ts",["cc","./Enums.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.cclegacy,i=t.director},function(t){n=t.Key}],execute:function(){e._RF.push({},"56d8cv+sSVOaIulMqAKHlgJ","Global",void 0);var r=t("Global",function(){function t(){}return t.Pause=function(e){void 0===e&&(e=!0),i.emit(n.Pause,e),t.start=!e},t}());r.currentPen=0,r.pens=[1,0,0,0,0,0,0,0],r.enableShareAd=!0,r.playersLayer=null,r.bricksLayer=null,r.tutorialPoints=[],r.screenRatio=1,r.Debug=!1,r.runtime=!1,r.start=!1,r.levelEnemies=1,r.isTutorial=!1,r.isDraw=!1,r.drawEnd=!1,r.isMobile=!1,r.high=!1,r.scale=2,r.LoadingRate=0,r.layer=[],r.scene=[],r.players=[],r.isEn=!1,r.maxLevel=20,r.level=1,r.currlevel=1,r.time=0,r.bgm=1,r.sound=1,e._RF.pop()}}})),System.register("chunks:///_virtual/GridConfig.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"64cd59E+/xID4Y4JqpA1lSj","GridConfig",void 0);var i=t("GridConfig",(function(){}));i.x=10,i.y=22,i.safeY=14,i.size=75,i.actions=[],e._RF.pop()}}})),System.register("chunks:///_virtual/GridCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.Color,u=t.Sprite,c=t.director,h=t.tween,p=t.Component},function(t){f=t.events}],execute:function(){var d,g,m,y,v,w;s._RF.push({},"960eb/0yIBBhKoSH4h5i4Eq","GridCtrl",void 0);var b=a.ccclass,_=a.property,C=new l;t("GridCtrl",(d=b("GridCtrl"),g=_(u),m=_({slide:!0,min:1,max:255}),d((w=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"sprite",w,r(e)),e.mat=null,e}i(e,t);var s=e.prototype;return s.start=function(){this.mat=this.sprite.customMaterial,c.on(f.paperOcacity,this.tweenOpacity,this),this.tweenOpacity(90)},s.tweenOpacity=function(t,i){if(this.opacity!=t){i||(i=.02*Math.abs(t-this.opacity));var n=this.getComponent(e);h(n).to(i,{opacity:t}).start()}},o(e,[{key:"opacity",get:function(){return this.sprite.color.a},set:function(t){C.set(this.sprite.color),C.a=t,this.sprite.color=C}}]),e}(p)).prototype,"sprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(v.prototype,"opacity",[m],Object.getOwnPropertyDescriptor(v.prototype,"opacity"),v.prototype),y=v))||y)),s._RF.pop()}}})),System.register("chunks:///_virtual/HomeView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./EnergyMgr.ts","./ResMgr.ts","./BaseView.ts","./GameView.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g;return{setters:[function(t){e=t.inheritsLoose,i=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t._decorator,s=t.director,a=t.Node},function(t){l=t.events,u=t.topStates,c=t.default,h=t.ui},function(t){p=t.EnergyMgr},function(t){f=t.default},function(t){d=t.BaseView},function(t){g=t.GameView}],execute:function(){var m;r._RF.push({},"1e0adWjukFNxKV1Icu8Lw/A","HomeView",void 0);var y=o.ccclass;o.property,t("HomeView",y("HomeView")(m=function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var o=r.prototype;return o.start=function(){s.on(l.gameStart,this.showBtn,this)},o.onEnable=function(){s.on(l.startCustom,this.closeHome,this),s.emit(l.changeTop,u.showAll)},o.onDisable=function(){s.off(l.startCustom,this.closeHome,this),s.off(l.gameStart,this.showBtn,this)},o.showBtn=function(){var t=i(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.off(l.gameStart,this.showBtn,this),t.next=3,f.ins.getUI(h.HomeBtnView,this.node);case 3:(e=t.sent).getChildByName("buildBtn").on(a.EventType.TOUCH_END,this.goBuild,this),e.getChildByName("moreBtn").on(a.EventType.TOUCH_END,this.moreGame,this),e.getChildByName("startBtn").on(a.EventType.TOUCH_END,this.goGame,this),e.getChildByName("chickBtn").on(a.EventType.TOUCH_END,this.goGame,this);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.goGame=function(){var e=i(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.ins.changeEnergy(!1)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.ins.getUI(h.GameView);case 5:e.sent.getComponent(g).init(0),t.prototype.close.call(this);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.closeHome=function(){t.prototype.close.call(this)},o.goBuild=function(){var e=i(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.ins.getUI(h.BuildView);case 2:t.prototype.close.call(this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.moreGame=function(){s.emit(l.Toast,c.gameText.home.moreGame)},r}(d))||m),r._RF.pop()}}})),System.register("chunks:///_virtual/ItemsCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdMgr.ts","./Enums.ts","./GameConfig.ts","./Global.ts","./Tools.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Node,l=t.Label,u=t.Component},function(t){c=t.AdMgr},function(t){h=t.Key},function(t){p=t.GameConfig},function(t){f=t.Global},function(t){d=t.load,g=t.save}],execute:function(){var m,y,v,w,b,_,C,M,T,S,P;o._RF.push({},"b268fMz94xLgpzhGheHuKAF","ItemsCtrl",void 0);var E=s.ccclass,x=s.property;t("ItemsCtrl",(m=E("ItemsCtrl"),y=x(a),v=x(a),w=x(a),b=x(a),m((M=e((C=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"freezeBg",M,r(e)),n(e,"undoBtn",T,r(e)),n(e,"shuffleBtn",S,r(e)),n(e,"freezeBtn",P,r(e)),e.undoLabel=null,e.shuffleLabel=null,e.frostLabel=null,e}i(e,t);var o=e.prototype;return o.onEnable=function(){var t=Number(d(h.Star));t||(g(h.Star,0),t=0),this._registerBtns(),this._initData()},o._initData=function(){this.shuffleLabel=this.shuffleBtn.getComponentInChildren(l);var t=Number(d(h.Shuffle));t||(t=p.startShuffle,g(h.Shuffle,t)),this.shuffleLabel.string=""+t,this.undoLabel=this.undoBtn.getComponentInChildren(l);var e=Number(d(h.Undo));e||(e=p.startUndo,g(h.Undo,e)),this.undoLabel.string=""+e,this.frostLabel=this.freezeBtn.getComponentInChildren(l);var i=Number(d(h.Frost));i||(i=p.startFrost,g(h.Frost,i)),this.frostLabel.string=""+i},o._registerBtns=function(){var t=this;this.shuffleBtn.on(a.EventType.TOUCH_END,(function(){t.shuffle()}),this),this.undoBtn.on(a.EventType.TOUCH_END,(function(){t.undo()}),this)},o.undo=function(){var t=this;if(f.start){var e=Number(d(h.Undo));!e||e<=0?c.showVideo((function(){e=p.startUndo,g(h.Undo,e),t.undoBtn.getChildByName("videoBtn").active=!1,t.undoLabel.string=""+e})):(e--,g(h.Undo,e),this.undoLabel.string=""+e,e<=0&&(this.undoBtn.getChildByName("videoBtn").active=!0))}},o.shuffle=function(){var t=this;if(f.start){var e=Number(d(h.Shuffle));!e||e<=0?c.showVideo((function(){e=p.startShuffle,g(h.Shuffle,e),t.shuffleBtn.getChildByName("videoBtn").active=!1,t.shuffleLabel.string=""+e})):(e--,g(h.Shuffle,e),this.shuffleLabel.string=""+e,e<=0&&(this.shuffleBtn.getChildByName("videoBtn").active=!0))}},e}(u)).prototype,"freezeBg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(C.prototype,"undoBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(C.prototype,"shuffleBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(C.prototype,"freezeBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=C))||_)),o._RF.pop()}}})),System.register("chunks:///_virtual/LevelMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./Tools.ts","./PoolMgr.ts","./ResMgr.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,r=t.Vec3,o=t.director,s=t.Component},function(t){a=t.events,l=t.topStates,u=t.Key,c=t.default},function(t){h=t.GameConfig},function(t){p=t.Global},function(t){f=t.Tools},function(t){d=t.PoolMgr},function(t){g=t.default}],execute:function(){n._RF.push({},"0a6faMj+o5KkJNm/Burah9d","LevelMgr",void 0),new r,t("LevelMgr",function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).data=[],e}e(n,t);var r=n.prototype;return r.loadLevel=function(t){p.players=[],t?(this.data=t,this.initLevel(t),h.setStrenth(12)):(t=n.loadLevel(),h.setStrenth(p.level),t&&(this.data=t,this.initLevel(t)))},r.restartGame=function(){this.data&&this.initLevel(this.data)},r.initLevel=function(t){o.emit(a.changeTop,l.hideStore),o.emit(a.clearMap),o.emit(u.Timer,0);var e=t.mapData;if(e){var i=e.length;if(i>0){for(var n=0;n<i;n++){var r=e[n],s=r[0],h=d.ins.getNode(s);this.setItem(r,h)}t.points.length>0?p.tutorialPoints=t.points:p.tutorialPoints.length=0,this.scheduleOnce((function(){p.isDraw=!1,p.drawEnd=!1,p.start=!0,o.emit(a.initTrap,f.getOne())}))}else o.emit(a.Toast,c.gameText.map.loadFail,1)}},n.loadLevel=function(){var t=p.level;return t>p.maxLevel&&(t=p.maxLevel),p.time=h.getTimer(t),o.emit(a.Toast,c.gameText.map.currentLevel+t),g.ins.getJson(""+t)},r.setItem=function(t,e){-1!=e.name.indexOf("player")?(e.parent=p.playersLayer,p.players.push(e)):e.parent=p.bricksLayer,h.setMapItem(t,e,!0)},i(n,null,[{key:"ins",get:function(){return this._ins||(this._ins=new n),this._ins}}]),n}(s))._ins=null,n._RF.pop()}}})),System.register("chunks:///_virtual/lineLogic.ts",["cc","./GameConfig.ts","./VecPool.ts","./Tools.ts"],(function(t){var e,i,n,r,o;return{setters:[function(t){e=t.cclegacy,i=t.Vec2},function(t){n=t.GameConfig},function(t){r=t.VecPool},function(t){o=t.Tools}],execute:function(){e._RF.push({},"af6f3LFHMhIGIeneX+TuGdZ","lineLogic",void 0),new i,new i,t("lineLogic",function(){function t(){}return t.setPolyBox=function(t,e,s,a){o.clearPoly(t);var l,u,c,h,p=.5*n.lineWidth,f=r.ins.Vec2.set(s[0]-e[0],s[1]-e[1]);switch(i.normalize(f,f),a){case 0:l=r.ins.Vec2.set(f.y,-f.x).multiplyScalar(p).add2f(e[0],e[1]),u=r.ins.Vec2.set(-f.y,f.x).multiplyScalar(p).add2f(e[0],e[1]),c=r.ins.Vec2.set(f.y,-f.x).multiplyScalar(p).add2f(s[0],s[1]),h=r.ins.Vec2.set(-f.y,f.x).multiplyScalar(p).add2f(s[0],s[1]),t.points=[l,u,h,c];break;case 1:l=r.ins.Vec2.set(e[0],e[1]),u=r.ins.Vec2.set(f.y,-f.x).multiplyScalar(p).add2f(s[0],s[1]),c=r.ins.Vec2.set(-f.y,f.x).multiplyScalar(p).add2f(s[0],s[1]),t.points=[l,u,c];break;case 2:l=r.ins.Vec2.set(f.y,-f.x).multiplyScalar(p).add2f(e[0],e[1]),u=r.ins.Vec2.set(-f.y,f.x).multiplyScalar(p).add2f(e[0],e[1]),c=r.ins.Vec2.set(s[0],s[1]),t.points=[l,u,c]}return t.apply(),t},t.normalize=function(t){var e=t[0],i=t[1],n=e*e+i*i;n>0&&(n=1/Math.sqrt(n),t[0]=e*n,t[1]=i*n)},t.pushPoints=function(t,e){var i=t.length;if(i<3)t.push(e);else{var n=t[i-2],r=t[i-1],o=[n[0]-r[0],n[1]-r[1]],s=[r[0]-e[0],r[1]-e[1]];this.normalize(o),this.normalize(s);var a=o[0],l=o[1],u=s[0],c=s[1],h=.1;a>=-h&&a<h?a=h:a<0&&a>-h&&(a=-h),l>=0&&l<h?l=h:l<0&&l>-h&&(l=-h),u>=0&&u<h?u=h:u<0&&u>-h&&(u=-h),c>=0&&c<h?c=h:c<0&&c>-h&&(c=-h);var p=a/u,f=l/c;if(f>0&&p<0)Math.abs(a)==h&&Math.abs(u)==h?t[t.length]=e:t.push(e);else if(p>0&&f<0)Math.abs(l)==h&&Math.abs(c)==h?t[t.length]=e:t.push(e);else if(p>0&&f>0){var d=p/f;d>.96&&d<1.04?t[t.length]=e:t.push(e)}else t.push(e)}},t}()),e._RF.pop()}}})),System.register("chunks:///_virtual/LoadCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./Tools.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Sprite,l=t.Component},function(t){u=t.Global},function(t){c=t.Tools}],execute:function(){var h,p,f,d,g;o._RF.push({},"91714+LEbNFq5BWdU9PslLO","LoadCtrl",void 0);var m=s.ccclass,y=s.property;t("LoadCtrl",(h=m("LoadCtrl"),p=y(a),h((g=e((d=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"load",g,r(e)),e.isload=!0,e}i(e,t);var o=e.prototype;return o.closeLoad=function(){this.isload=!1,c.clearUI(this.node)},o.update=function(t){this.isload&&(this.load.fillRange=u.LoadingRate,u.LoadingRate>=.99&&this.closeLoad())},e}(l)).prototype,"load",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f)),o._RF.pop()}}})),System.register("chunks:///_virtual/main",["./GameConfig.ts","./Global.ts","./Main.ts","./BuildView.ts","./EditorMgr.ts","./EditorView.ts","./FileMgr.ts","./GridConfig.ts","./MapItem.ts","./MapTools.ts","./ToastCtrl.ts","./AdMgr.ts","./WxPlatform.ts","./AdCtrl.ts","./CaptureCtrl.ts","./FullscreenCtrl.ts","./GridCtrl.ts","./ItemsCtrl.ts","./LoadCtrl.ts","./PlayerCtrl.ts","./TrapCtrl.ts","./Enums.ts","./EnemyAI.ts","./EnemyMgr.ts","./Astar.ts","./FSM.ts","./lineLogic.ts","./AudioMgr.ts","./DataMgr.ts","./EnergyMgr.ts","./GameMgr.ts","./LevelMgr.ts","./PathFindMgr.ts","./PoolMgr.ts","./ResMgr.ts","./TimerMgr.ts","./VecPool.ts","./testLine.ts","./CamShot.ts","./Tools.ts","./AdView.ts","./BaseView.ts","./BuildCardView.ts","./CustomView.ts","./GameView.ts","./HomeView.ts","./MoneyView.ts","./ResultView.ts","./StoreView.ts","./TopView.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}})),System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WxPlatform.ts","./GridCtrl.ts","./Enums.ts","./GameConfig.ts","./Global.ts","./ResMgr.ts","./CamShot.ts","./Tools.ts","./CustomView.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_,C,M,T,S,P,E,x,L,D,R,A,I,B,V,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,u=t.CCInteger,c=t.Node,h=t.sys,p=t.view,f=t.director,d=t.Canvas,g=t.instantiate,m=t.game,y=t.PhysicsSystem2D,v=t.Component},null,function(t){w=t.GridCtrl},function(t){b=t.Props,_=t.adConfig,C=t.shareConfig,M=t.penConfig,T=t.Key,S=t.ui,P=t.events,E=t.topStates,x=t.Assets},function(t){L=t.GameConfig},function(t){D=t.Global},function(t){R=t.default},function(t){A=t.CamShot},function(t){I=t.Tools,B=t.load,V=t.save},function(t){k=t.CustomView}],execute:function(){var z,G,F,N,O,U,H,j,W,J,K,Y,q,Z,X,Q,$,tt,et,it,nt,rt,ot,st;a._RF.push({},"5851e4Oe/VNRp/6qH6dPqUm","Main",void 0);var at=l.ccclass,lt=l.property;t("Main",(z=at("Main"),G=lt({tooltip:"add Energy Set up",group:b.Setting,displayOrder:0}),F=lt({type:u,tooltip:"max Energy",group:b.Setting,displayOrder:0}),N=lt({type:u,tooltip:"max Level Set up",group:b.Setting,displayOrder:0}),O=lt({type:_,tooltip:"Id for banner",group:b.AdConfig,displayOrder:1}),U=lt({tooltip:"enable share ad when no videos",group:b.AdConfig,displayOrder:1}),H=lt({type:C,tooltip:"Id for Share",group:b.ShareConfig,displayOrder:1}),j=lt({tooltip:"use high performance",group:b.Setting,displayOrder:0}),W=lt({type:M,tooltip:"pen items config",group:b.Setting,displayOrder:1}),J=lt({type:w,group:b.Comps}),K=lt(c),z(((st=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"addEnergy",Z,r(e)),n(e,"maxEnergy",X,r(e)),n(e,"maxLevel",Q,r(e)),n(e,"Platforms",$,r(e)),n(e,"EnableShareAd",tt,r(e)),n(e,"Shares",et,r(e)),n(e,"highPerformance",it,r(e)),n(e,"penConfigs",nt,r(e)),n(e,"grid",rt,r(e)),n(e,"HomeView",ot,r(e)),e.level=null,e.canvas=null,e.layer=[],e}i(e,t);var a=e.prototype;return a.onLoad=function(){h.platform==h.Platform.DESKTOP_BROWSER&&p.setResolutionPolicy(3),I.setRatio(),this.setting(),e.ins=this},a.start=function(){var t=o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadData(),t.next=3,this.loadRes();case 3:this.initUI(),this.initWechat();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.loadData=function(){L.penConfigs=this.penConfigs,D.maxLevel=this.maxLevel;var t=B(T.Level);t||(t=1,V(T.Level,t)),D.level=t;var e=B(T.Energy);e||(e=L.startEnergy,V(T.Energy,e));var i=B(T.CurrentPen);i?D.currentPen=i:(i=D.currentPen,V(T.CurrentPen,i));var n=B(T.Pens,2);n?D.pens=n:(n=JSON.stringify(D.pens),V(T.Pens,n));var r=B(T.Sound);r?D.sound=r:(r=D.sound,V(T.Sound,r));var o=B(T.Bgm);o?D.bgm=o:(o=D.bgm,V(T.Bgm,o))},a.initUI=function(){var t=f.getScene();this.canvas=t.getComponentInChildren(d).node;for(var e=0;e<=7;e++){var i=this.layer[0]?g(this.layer[0]):I.createUI();i.name="layer"+e,i.parent=this.canvas,D.layer[e]=this.layer[e]=i}R.ins.getUI(S.TopView),R.ins.getUI(S.ToastView),f.emit(P.gameStart),f.emit(P.changeTop,E.showAll),A.ins.initCam()},a.loadRes=function(){var t=o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.ins.loadBundle(1,.15);case 2:return t.next=4,R.ins.loadRes(1,x.UiPrefab,.2);case 4:return t.next=6,R.ins.loadRes(1,x.BrickPrefab,.3);case 6:return t.next=8,R.ins.loadRes(1,x.Sound,.2);case 8:return t.next=10,R.ins.loadRes(1,x.Json,.1);case 10:return t.next=12,R.ins.loadRes(1,x.Material,.05);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a.setting=function(){this.highPerformance?(m.frameRate=60,L.timeScale=1):(m.frameRate=30,L.enemySpeed*=.45,y.instance.maxSubSteps=3,L.timeScale=1.8),D.enableShareAd=this.EnableShareAd,D.isEn=I.isEn(),D.runtime=!0,L.maxLevel=this.maxEnergy,L.addEnergy=this.addEnergy,L.maxLevel=this.maxLevel},a.initWechat=function(){var t=o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.loadWechatData=function(){var t=o(s().mark((function t(e){var i,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.map){t.next=3;break}return t.abrupt("return");case 3:if(!(n=JSON.parse(i))||!n.id){t.next=9;break}return t.next=7,R.ins.getUI(S.CustomView);case 7:t.sent.getComponent(k).init(n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}(v)).ins=null,Z=e((q=st).prototype,"addEnergy",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),X=e(q.prototype,"maxEnergy",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),Q=e(q.prototype,"maxLevel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),$=e(q.prototype,"Platforms",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tt=e(q.prototype,"EnableShareAd",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),et=e(q.prototype,"Shares",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=e(q.prototype,"highPerformance",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nt=e(q.prototype,"penConfigs",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rt=e(q.prototype,"grid",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(q.prototype,"HomeView",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=q))||Y)),a._RF.pop()}}})),System.register("chunks:///_virtual/MapItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GridConfig.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Sprite,l=t.SpriteFrame,u=t.UITransform,c=t.Component},function(t){h=t.default},function(t){p=t.GridConfig}],execute:function(){var f,d,g,m,y,v,w;o._RF.push({},"7d34arbe7xGI4z1mRWRolh7","MapItem",void 0);var b=s.ccclass,_=s.property;t("MapItem",(f=b("MapItem"),d=_(a),g=_(l),f((v=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"sp",v,r(e)),n(e,"sfs",w,r(e)),e.size=null,e.grid=[1,1],e.isBrush=!1,e.isDelete=!1,e.isRotate=!1,e.isDraw=!1,e}return i(e,t),e.prototype.init=function(t,e,i){this.isBrush=-1!=t.indexOf(h.gameText.tools.brick),-1!=t.indexOf(h.gameText.tools.delete)?this.isDelete=!0:-1!=t.indexOf(h.gameText.tools.rotate)?(this.isRotate=!0,this.sp.spriteFrame=this.sfs[0]):-1!=t.indexOf(h.gameText.tools.line)&&(this.isDraw=!0,this.sp.spriteFrame=this.sfs[1]);var n=this.sp.node;n.name=t,i&&(this.sp.spriteFrame=i.spriteFrame,this.sp.color=i.color),e||(e=this.node.getComponent(u).contentSize),this.size=e,n.getComponent(u).setContentSize(e);var r=62/Math.max(e.width,e.height);n.setScale(r,r),this.grid[0]=Math.max(1,Math.round(e.width/p.size)),this.grid[1]=Math.max(1,Math.round(e.height/p.size))},e}(c)).prototype,"sp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(y.prototype,"sfs",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=y))||m)),o._RF.pop()}}})),System.register("chunks:///_virtual/MapTools.ts",["cc"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p;return{setters:[function(t){e=t.cclegacy,i=t.view,n=t.Node,r=t.Canvas,o=t.UITransform,s=t.Widget,a=t.Camera,l=t.renderer,u=t.gfx,c=t.Vec3,h=t.DirectionalLight,p=t.Color}],execute:function(){e._RF.push({},"5fad3AMDsJE+KpvMLD8p66b","MapTools",void 0),t("MapTools",function(){function t(){}return t.createCanvas=function(t){var e=i.getDesignResolutionSize(),c=new n("Canvas").addComponent(r);c.getComponent(o).setContentSize(e);var h=c.addComponent(s);h.isAlignVerticalCenter=h.isAlignHorizontalCenter=!0,h.top=h.bottom=h.left=h.right=0,h.alignMode=s.AlignMode.ON_WINDOW_RESIZE;var p=new n("UiCamera"),f=p.addComponent(a);return f.projection=l.scene.CameraProjection.ORTHO,f.clearFlags=u.ClearFlagBit.DEPTH,f.visibility=41943040,f.orthoHeight=576.045455,p.parent=c.node,p.setPosition(0,0,1e3),c.cameraComponent=f,c.alignCanvasWithScreen=!0,t&&(c.node.parent=t),c},t.createLight=function(t){var e=new n("Light");return e.setRotationFromEuler(new c(-45)),e.addComponent(h),t&&(e.parent=t),e},t.createCamera=function(t){var e=new n("Camera");t&&(e.parent=t);var i=e.addComponent(a);return i.clearColor=p.fromHEX(new p,"02141E"),i.clearFlags=u.ClearFlagBit.ALL,i},t}()),e._RF.pop()}}})),System.register("chunks:///_virtual/MoneyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./AudioMgr.ts","./EnergyMgr.ts","./BaseView.ts"],(function(t){var e,i,n,r,o,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator},function(t){r=t.Clips},function(t){o=t.AudioMgr},function(t){s=t.EnergyMgr},function(t){a=t.BaseView}],execute:function(){var l;i._RF.push({},"f5c7042v3NJ57yavqFdzjar","MoneyView",void 0);var u=n.ccclass;n.property,t("MoneyView",u("MoneyView")(l=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.getReward=function(){var e=this;t.prototype.showVideo.call(this,(function(){e.giveReward()}))},n.giveReward=function(){s.ins.changeEnergy(!0),o.ins.playSound(r.reward)},n.closePanel=function(){t.prototype.close.call(this)},i}(a))||l),i._RF.pop()}}})),System.register("chunks:///_virtual/PathFindMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Astar.ts","./Tools.ts"],(function(t){var e,i,n,r,o,s,a;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,r=t.Component},function(t){o=t.Graph,s=t.Astar},function(t){a=t.Tools}],execute:function(){n._RF.push({},"be02bjYkepOw6h6Uu3OH7Pu","PathFindMgr",void 0),t("PathFindMgr",function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).graph=void 0,e}e(n,t);var r=n.prototype;return r.init=function(t){this.graph=new o(t)},r.setNode=function(t,e){void 0===e&&(e=0),this.graph.setWeight(t,e)},r.clear=function(){this.graph.clearNodes()},r.getGridPath=function(t,e){var i=new s,n=i.search(this.graph,t,e);return i=null,n},r.getPath=function(t,e){var i=a.getGridPos(t),n=a.getGridPos(e),r=this.graph.getNode(i),o=this.graph.getNode(n),s=this.getGridPath(r,o);return this.stringPull(s)},r.stringPull=function(t){var e=[];return t.forEach((function(t){e.push(a.getLocalPos(t,!1))})),t.length=0,e},i(n,null,[{key:"ins",get:function(){return this._ins||(this._ins=new n),this._ins}}]),n}(r))._ins=null,n._RF.pop()}}})),System.register("chunks:///_virtual/PlayerCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./AudioMgr.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.Color,u=t.Collider2D,c=t.Animation,h=t.Sprite,p=t.director,f=t.Contact2DType,d=t.Component},function(t){g=t.events,m=t.anms,y=t.Key,v=t.Clips,w=t.default,b=t.collisions},function(t){_=t.Global},function(t){C=t.AudioMgr}],execute:function(){var M,T,S,P,E,x,L,D,R;s._RF.push({},"367baWhs5dMSYGCrwkcn69l","PlayerCtrl",void 0);var A=a.ccclass,I=a.property,B=new l(247,20,101,255);t("PlayerCtrl",(M=A("PlayerCtrl"),T=I(u),S=I(c),P=I(h),M((L=e((x=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"collider",L,r(e)),n(e,"anm",D,r(e)),n(e,"sp",R,r(e)),e.isDead=!1,e}i(e,t);var s=e.prototype;return s.onEnable=function(){this.unschedule(this.fail),this.isDead=!1,this.idle(),p.on(g.gameWin,this.win,this),this.collider.on(f.BEGIN_CONTACT,this.onBeginContact,this)},s.onDisable=function(){p.off(g.gameWin,this.win,this),this.collider.off(f.BEGIN_CONTACT,this.onBeginContact,this)},s.win=function(){this.Color=l.WHITE,this.anm.play(m.happy)},s.hurt=function(){_.start&&(this.Color=B,p.emit(y.Timer,0)),C.ins.playSound(v.hurt),this.anm.play(m.hurt),this.isDead=!0,this.scheduleOnce(this.fail,1)},s.fail=function(){this.Color=l.WHITE,_.start&&(_.start=!1,this.anm.play(m.cry),p.emit(g.Toast,w.gameText.game.fail),this.scheduleOnce((function(){p.emit(y.Timer,0),p.emit(g.restartGame)}),1))},s.idle=function(){this.Color=l.WHITE,this.anm.play(m.idle)},s.onBeginContact=function(t,e,i){this.isDead||e.group!=b.trap&&e.group!=b.water&&e.group!=b.enemy||this.hurt()},o(e,[{key:"Color",set:function(t){this.sp.color=t}}]),e}(d)).prototype,"collider",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(x.prototype,"anm",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(x.prototype,"sp",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=x))||E)),s._RF.pop()}}})),System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,n=t._decorator,r=t.instantiate,o=t.NodePool}],execute:function(){var s,a;i._RF.push({},"f49d1vZlghN5ZCVEwLhutRS","PoolMgr",void 0);var l=n.ccclass;n.property,t("PoolMgr",l("PoolMgr")(((a=function(){function t(){this._dictPool={},this._dictPrefab={}}var i=t.prototype;return i.copyNode=function(t,e){var i=t.name,n=null;if(this._dictPool.hasOwnProperty(i)){var s=this._dictPool[i];n=s.size()>0?s.get():r(t)}else{var a=new o;this._dictPool[i]=a,n=r(t)}return e&&(n.parent=e,n.active=!0),n},i.getNode=function(t,e,i){var n,s,a;if("string"==typeof t?(n=this._dictPrefab[t],s=t):(n=t,s=t.data.name),this._dictPool.hasOwnProperty(s)){var l=this._dictPool[s];if(l.size()>0)a=l.get();else{if(!n)return console.log("Pool invalid prefab name = ",s),null;a=r(n)}}else{if(!n)return console.log("Pool invalid prefab name = ",s),null;var u=new o;this._dictPool[s]=u,a=r(n)}return e&&(a.parent=e,a.active=!0,i&&(a.position=i)),a},i.putNode=function(t,e){if(t){var i=t.name,n=null;this._dictPool.hasOwnProperty(i)?n=this._dictPool[i]:(n=new o,this._dictPool[i]=n),n.put(t)}},i.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},i.setPrefab=function(t,e){this._dictPrefab[t]=e},i.getPrefab=function(t){return this._dictPrefab[t]},e(t,null,[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}]),t}())._ins=void 0,s=a))||s),i._RF.pop()}}})),System.register("chunks:///_virtual/ResMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./PoolMgr.ts"],(function(t){var e,i,n,r,o,s,a,l,u;return{setters:[function(t){e=t.createClass,i=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,o=t.instantiate,s=t.assetManager},function(t){a=t.Assets},function(t){l=t.Global},function(t){u=t.PoolMgr}],execute:function(){r._RF.push({},"9d193Ozp4FDF4owOBNeNc72","ResMgr",void 0),t("default",function(){function t(){this._abBundleMap={},this._atlasMap={},this._jsonAssetMap={},this._clipMap={},this._matMap={},this.buildPrefabs=[[],[],[]],this._loadStemp=null,this.loadTime=0,this._totalTime=0}var r=t.prototype;return r.printTimer=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1),this.loadTime=Date.now()-this._loadStemp,this._loadStemp=Date.now(),this._totalTime+=this.loadTime,console.log(t+"，load time===",this.loadTime,"ms"),e&&console.log("Load finish, total time===",this._totalTime,"ms")},r.loadBundle=function(){var t=i(n().mark((function t(e,i){var r,o,a=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===i&&(i=0),this._loadStemp||(this._loadStemp=Date.now()),r=l.LoadingRate,o="Bundle"+e,t.abrupt("return",new Promise((function(t,n){s.loadBundle(o,(function(n,o){n?console.error("Bundle"+e+" load error, error==",n):(2!=e&&(a._abBundleMap[e]=o),a.printTimer("Bundle"+e+"__load success"),l.LoadingRate=r+i,t&&t())}))})));case 5:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.loadRes=function(){var t=i(n().mark((function t(e,i,r){var o,s=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=0),o=l.LoadingRate,t.abrupt("return",new Promise((function(t,n){s._abBundleMap[e].loadDir(i.path,i.type,(function(t,e){r>0&&(l.LoadingRate=o+r*t/e)}),(function(n,r){var o;switch(n&&(console.error("Error===",n),t&&t()),i){case a.UiPrefab:for(var c=0;c<r.length;c++){var h=(o=r[c]).data.name;u.ins.setPrefab(h,o),l.Debug&&console.log("prefab name==",h)}break;case a.BrickPrefab:for(var p=0;p<r.length;p++){var f=(o=r[p]).data.name;u.ins.setPrefab(f,o),-1!=f.indexOf("brick")||-1!=f.indexOf("player")?s.buildPrefabs[0].push(o):-1!=f.indexOf("trap")?s.buildPrefabs[1].push(o):s.buildPrefabs[2].push(o),l.Debug&&console.log("prefab name==",f)}break;case a.Sound:for(var d=0;d<r.length;d++)o=r[d],l.Debug&&console.log("clip name==",o.name),s._clipMap[o.name]||(s._clipMap[o.name]=o);break;case a.Material:for(var g=0;g<r.length;g++)o=r[g],console.log("mat name==",o.name),s._matMap[o.name]||(s._matMap[o.name]=o);break;case a.Atlas:for(var m=0;m<r.length;m++)o=r[m],l.Debug&&console.log("atlas name==",o.name),s._atlasMap[o.name]||(s._atlasMap[o.name]=o);break;case a.Json:for(var y=0;y<r.length;y++)o=r[y],l.Debug&&console.log("json name==",o.name),s._jsonAssetMap[o.name]||(s._jsonAssetMap[o.name]=o.json)}s.printTimer("Bundle"+e+"__"+i.path+"loaded success"),t&&t()}))})));case 3:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}(),r.loadBgm=function(){var t=i(n().mark((function t(){var e,i=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.abrupt("return",new Promise((function(t,n){i._abBundleMap[5].load("bgm",(function(i,n){i&&(console.error("Error info===",i),t&&t()),e._clipMap[n.name]||(e._clipMap[n.name]=n),t&&t()}))})));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.loadPrefab=function(){var t=i(n().mark((function t(e){var i=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){i._abBundleMap[e.bundle].load(e.path+e.name,(function(i,n){i&&(console.error("Error info===",i),t&&t()),u.ins.setPrefab(e.name,n),t&&t()}))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.preloadRes=function(){var t=i(n().mark((function t(e,i,r){var s,a=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=0),s=l.LoadingRate,t.abrupt("return",new Promise((function(t,n){for(var c=u.ins.getPrefab(e),h=0;h<i;h++)u.ins.putNode(o(c));r>0&&(l.LoadingRate=s+r),a.printTimer("preload_"+e),t&&t()})));case 3:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}(),r.getAtlas=function(t){return this._atlasMap[t]},r.getPrefab=function(){var t=i(n().mark((function t(e,i){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u.ins.getPrefab(e.name)){t.next=2;break}return t.abrupt("return",u.ins.getNode(e.name,i));case 2:return t.next=4,this.loadPrefab(e);case 4:return t.abrupt("return",u.ins.getNode(e.name,i));case 5:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),r.getJson=function(t){return this._jsonAssetMap[t]},r.getClip=function(t){return this._clipMap[t]},r.getMat=function(t){return this._matMap[t]},r.getUI=function(){var t=i(n().mark((function t(e,i){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.clear){t.next=5;break}if(i||!l.layer[e.layer].children[0]){t.next=5;break}if(l.layer[e.layer].children[0].name!=e.name){t.next=4;break}return t.abrupt("return");case 4:u.ins.putNode(l.layer[e.layer].children[0]);case 5:return r=i||l.layer[e.layer],t.next=8,this.getPrefab(e,r);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),e(t,null,[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}]),t}())._ins=null,r._RF.pop()}}})),System.register("chunks:///_virtual/ResultView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./AudioMgr.ts","./EnergyMgr.ts","./LevelMgr.ts","./CamShot.ts","./Tools.ts","./BaseView.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_,C,M,T,S,P,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,u=t.Sprite,c=t.Node,h=t.Toggle,p=t.director,f=t.view},function(t){d=t.events,g=t.Key,m=t.default,y=t.topStates,v=t.Clips},function(t){w=t.GameConfig},function(t){b=t.Global},function(t){_=t.AudioMgr},function(t){C=t.EnergyMgr},function(t){M=t.LevelMgr},function(t){T=t.CamShot},function(t){S=t.save,P=t.Tools},function(t){E=t.BaseView}],execute:function(){var x,L,D,R,A,I,B,V,k;a._RF.push({},"31971Vlhz9BGLSfsK4jro5E","ResultView",void 0);var z=l.ccclass,G=l.property;t("ResultView",(x=z("ResultView"),L=G(u),D=G(c),R=G(h),x((B=e((I=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"sp",B,r(e)),n(e,"videoNode",V,r(e)),n(e,"videoToggle",k,r(e)),e.isWatchAd=!1,e}i(e,t);var a=e.prototype;return a.start=function(){this.videoToggle.node.on(h.EventType.TOGGLE,this.changeVideoState,this)},a.onEnable=function(){p.on(d.startCustom,this.returnHome,this)},a.onDisable=function(){p.off(d.startCustom,this.returnHome,this)},a.init=function(){b.level++,b.level>w.maxLevel&&(b.level=w.maxLevel),S(g.Level,b.level),p.emit(d.Toast,m.gameText.game.win),this.capture(),p.emit(d.changeTop,y.showStore),b.level>2&&Math.random()>.7?this.isWatchAd=this.videoToggle.isChecked=this.videoNode.active=!0:this.isWatchAd=this.videoToggle.isChecked=this.videoNode.active=!1},a.next=function(){var e=o(s().mark((function e(){var i=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isWatchAd){e.next=5;break}this.isWatchAd=this.videoToggle.isChecked=this.videoNode.active=!1,t.prototype.showVideo.call(this,(function(){i.giveVideoReward(),i.loadLevel()})),e.next=9;break;case 5:if(C.ins.changeEnergy(!1)){e.next=8;break}return e.abrupt("return");case 8:this.loadLevel();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.loadLevel=function(){M.ins.loadLevel(),t.prototype.close.call(this)},a.returnHome=function(){p.emit(d.closeGame),t.prototype.close.call(this)},a.giveVideoReward=function(){C.ins.changeEnergy(!0)},a.capture=function(){this.clear(),T.ins.copyRenderTex(this.sp,this.getPlayersOffset()),_.ins.playSound(v.photo),this.scheduleOnce((function(){_.ins.playSound(v.win)}),.8),P.fadeIn(this.sp.node.parent)},a.getPlayersOffset=function(){var t=b.players,e=0,i=0;if(t.length>0){i=Math.round(t[0].position.x),e=Math.round(t[0].position.y)+36;var n=Math.round(.5*(f.getVisibleSize().height-720));e>n&&(e=n),e<-n&&(e=-n),i>50&&(i=50),i<-50&&(i=-50)}return[i,e]},a.clear=function(){var t=this.sp.spriteFrame;if(t){var e=t.texture;if(e){var i=e.image;i&&(i.destroy(),e.image=null),t.texture&&(e=null)}t=null}},a.changeVideoState=function(t){var e=t.isChecked;this.isWatchAd=e,this.videoNode.active=e},e}(E)).prototype,"sp",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(I.prototype,"videoNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(I.prototype,"videoToggle",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=I))||A)),a._RF.pop()}}})),System.register("chunks:///_virtual/StoreView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts","./Global.ts","./AudioMgr.ts","./EnergyMgr.ts","./Tools.ts","./BaseView.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w,b,_,C,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.Color,u=t.Node,c=t.Prefab,h=t.director,p=t.instantiate,f=t.Sprite,d=t.tween},function(t){g=t.events,m=t.Key,y=t.Clips},function(t){v=t.GameConfig},function(t){w=t.Global},function(t){b=t.AudioMgr},function(t){_=t.EnergyMgr},function(t){C=t.save},function(t){M=t.BaseView}],execute:function(){var T,S,P,E,x,L,D,R,A;s._RF.push({},"97d21aYrYROzoD0d6hb4wxA","StoreView",void 0);var I=a.ccclass,B=a.property,V=new l(160,200,240,255);t("StoreView",(T=I("StoreView"),S=B(u),P=B(u),E=B(c),T((D=e((L=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"row1",D,r(e)),n(e,"row2",R,r(e)),n(e,"penItem",A,r(e)),e.penSPs=[],e.penL=void 0,e.inited=!1,e._red=0,e._self=void 0,e._isDraw=!1,e}i(e,t);var s=e.prototype;return s.onEnable=function(){this.initPens(),h.emit(g.Toast,"你不喜欢彩笔么～")},s.initPens=function(){if(!this.inited){this._self=this.node.getComponent(e),this.inited=!0;var t=this.penL=v.penConfigs.length;if(t>=1)for(var i=0;i<t;i++){var n=p(this.penItem);n.parent=i>3?this.row2:this.row1,this.setPen(n,i)}}this.setPens()},s.setPens=function(){this.penSPs.forEach((function(t,e){e==w.currentPen?t.color=l.YELLOW:0==w.pens[e]?t.color=V:t.color=l.WHITE}))},s.changePen=function(t){0!=w.pens[t]?(w.currentPen=t,this.setPens(),C(m.CurrentPen,t),h.emit(g.changePen,w.currentPen)):h.emit(g.Toast,"这个彩笔还没有喔～")},s.setPen=function(t,e){var i=this;t.on(u.EventType.TOUCH_END,(function(){i.changePen(e)}),this);var n=t.getComponent(f);this.penSPs.push(n);var r=t.getChildByName("penColor").getComponent(f);r.spriteFrame=v.penConfigs[e].penSF,r.color=v.penConfigs[e].penColor},s.getReward=function(){var e=this;this._isDraw||t.prototype.showVideo.call(this,(function(){e.giveReward()}))},s.giveReward=function(){var t=this;this._isDraw=!0;var e=Math.floor(this.penL*Math.random()-.3*this.penL*Math.random()+1);e>this.penL-1&&(e=this.penL-1),e<0&&(e=0);var i=e+4*this.penL;this._red=0,this.penSPs.forEach((function(t){t.color=l.WHITE})),d(this._self).to(3,{red:i}).call((function(){t.getPen(e)})).start()},s.getPen=function(t){var e=this;if(1==w.pens[t])h.emit(g.Toast,"有这个彩笔啦，给你鸡蛋！"),_.ins.changeEnergy(!0);else{h.emit(g.Toast,"获得了新的彩笔！"),w.pens[t]=1;var i=JSON.stringify(w.pens);C(m.Pens,i)}this.scheduleOnce((function(){e.setPens(),e._isDraw=!1}),.65),b.ins.playSound(y.reward)},s.closePanel=function(){this._isDraw||t.prototype.close.call(this)},o(e,[{key:"red",get:function(){return this._red},set:function(t){(t=Math.floor(t%this.penL))!=this._red&&(this.penSPs[this._red].color=l.WHITE,this.penSPs[t].color=l.RED,this._red=t)}}]),e}(M)).prototype,"row1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(L.prototype,"row2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(L.prototype,"penItem",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=L))||x)),s._RF.pop()}}})),System.register("chunks:///_virtual/testLine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o,s,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Graphics,l=t.Component}],execute:function(){var u,c,h,p,f,d;o._RF.push({},"39799KSFGdBfJbFh0j8wvLj","testLine",void 0);var g=s.ccclass,m=s.property,y=s.executeInEditMode;t("testLine",(u=g("testLine"),c=y(!0),h=m(a),u(p=c((d=e((f=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"gc",d,r(e)),e}i(e,t);var o=e.prototype;return o.onEnable=function(){this.gc.lineWidth=60,this.gc.moveTo(0,30),this.gc.lineTo(0,-30),this.gc.stroke()},o.update=function(t){},e}(l)).prototype,"gc",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p)||p)),o._RF.pop()}}})),System.register("chunks:///_virtual/TimerMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./AudioMgr.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Label,l=t.UIOpacity,u=t.Animation,c=t.director,h=t.Component},function(t){p=t.Key,f=t.Clips,d=t.events},function(t){g=t.Global},function(t){m=t.AudioMgr}],execute:function(){var y,v,w,b,_;o._RF.push({},"48c3aJtLndNDL0yc8+UJpj0","TimerMgr",void 0);var C=s.ccclass,M=s.property;t("TimerMgr",(y=C("TimerMgr"),v=M(a),y((_=e((b=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this)._op=null,e._anm=null,n(e,"text",_,r(e)),e}i(e,t);var o=e.prototype;return o.start=function(){this._op=this.node.getComponent(l),this._anm=this.node.getComponent(u),c.on(p.Timer,this.setTimer,this),c.on(p.Pause,this.pause,this),this._op.opacity=0},o.pause=function(t){0!=this._op.opacity&&(t?this.unschedule(this.timer):this.schedule(this.timer,1))},o.setTimer=function(t){if(this._anm.stop(),0==t){if(0==this._op.opacity)return;this.unschedule(this.timer),this._op.opacity=0}else g.time=t,this._op.opacity=255,this.text.string=t+"",this.schedule(this.timer,1)},o.gameWin=function(){this._op.opacity=0,g.start=!1,this.unschedule(this.timer),this.scheduleOnce((function(){m.ins.playSound(f.happy)}),.2),c.emit(d.paperOcacity,15,0),c.emit(d.gameWin),this.scheduleOnce((function(){c.emit(d.showResult)}),1.5)},o.timer=function(){g.time--,this.text.string=g.time+"",g.time<5&&g.time>0&&(4==g.time&&this._anm.play(),m.ins.playSound(f.counter)),g.time<=0&&(this._anm.stop(),this.node.angle=0,this.gameWin())},e}(h)).prototype,"text",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=b))||w)),o._RF.pop()}}})),System.register("chunks:///_virtual/ToastCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Label,l=t.UIOpacity,u=t.Tween,c=t.director,h=t.Component},function(t){p=t.events}],execute:function(){var f,d,g,m,y,v,w;o._RF.push({},"bff51GGa4lI24yTmwB2+eLC","ToastCtrl",void 0);var b=s.ccclass,_=s.property;t("ToastCtrl",(f=b("ToastCtrl"),d=_(a),g=_(l),f((v=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"text",v,r(e)),n(e,"toast",w,r(e)),e._tw=new u,e.time=1,e}i(e,t);var o=e.prototype;return o.onEnable=function(){c.on(p.Toast,this.showToast,this),this.toast.opacity=0,this._tw.target(this.toast),this._tw.set({opacity:0}).to(.6,{opacity:255}).delay(this.time).to(.25,{opacity:0})},o.onDisable=function(){c.off(p.Toast,this.showToast,this)},o.showToast=function(t,e){void 0===e&&(e=2),this.time=e,this.text.string=t,this._tw.start()},e}(h)).prototype,"text",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(y.prototype,"toast",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m)),o._RF.pop()}}})),System.register("chunks:///_virtual/Tools.ts",["cc","./Global.ts","./PoolMgr.ts","./ResMgr.ts","./VecPool.ts","./GridConfig.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m;return{setters:[function(t){e=t.cclegacy,i=t.sys,n=t.Vec3,r=t.Layers,o=t.view,s=t.Node,a=t.UITransform,l=t.Widget,u=t.Sprite,c=t.screen,h=t.tween,p=t.UIMeshRenderer},function(t){f=t.Global},null,function(t){d=t.default},function(t){g=t.VecPool},function(t){m=t.GridConfig}],execute:function(){t({load:function(t,e){void 0===e&&(e=1);var n=i.localStorage.getItem(t);if(n){switch(e){case 0:break;case 1:n=Number(n);break;case 2:n=JSON.parse(n)}return n}return null},save:function(t,e){"number"==typeof e&&(e=""+e),i.localStorage.setItem(t,e||"")}}),e._RF.push({},"55194GHJUNN+Ig1/aUmx7KT","Tools",void 0);var y=new n(1,1,1),v=new n(0,0,0);t("Tools",function(){function t(){}return t.getDay=function(){return Math.floor(Date.now()/864e5)},t.createUI=function(t,e){void 0===t&&(t="uiNode"),void 0===e&&(e=r.Enum.UI_2D);var i=o.getVisibleSize(),n=new s(t);n.addComponent(a).setContentSize(i);var u=n.addComponent(l);return u.isAlignLeft=u.isAlignTop=u.isAlignTop=u.isAlignBottom=!0,u.right=u.left=u.top=u.bottom=0,n.layer=e,n},t.getDateId=function(){var t=new Date,e=t.getDay().toString()+t.getHours().toString()+t.getMinutes().toString()+t.getSeconds().toString();return Math.floor(Number(e)+.1*Math.floor(Math.random()*(5e5*Math.random()+5e4))).toString()},t.isEn=function(){return-1==navigator.language.indexOf("zh")},t.getGridPos=function(t){return[Math.floor(.5*m.x+t.x/m.size),Math.floor(.5*m.y+t.y/m.size)]},t.getLocalPos=function(t,e){void 0===e&&(e=!1);var i=(t.x-.5*m.x+.5)*m.size,n=(t.y-.5*m.y+.5)*m.size;return e&&this.showGizmo(i,n),[i,n]},t.showGizmo=function(t,e){},t.clearUI=function(e,i){if(void 0===i&&(i=!0),i){var n=e.getComponent(u);n&&t.clearSprite(n);var r=e.getComponentsInChildren(u);r.length>0&&r.forEach((function(e){t.clearSprite(e)}))}e.destroy()},t.prototype.MoveTowards=function(t,e,i){var n=e[0]-t.x,r=e[1]-t.y,o=n*n+r*r;if(0==o||i>=0&&o<=i*i)return t.set(e[0],e[1]),!0;var s=Math.sqrt(o);return t.x=+n/s*i,t.y=+r/s*i,!1},t.setRatio=function(){var t=c.windowSize,e=o.getDesignResolutionSize();f.screenRatio=t.height/t.width/(e.height/e.width),f.screenRatio<1&&(f.screenRatio=1),console.log("size==",t,f.screenRatio)},t.fadeIn=function(t,e){void 0===e&&(e=.2),h(t).set({scale:n.ZERO}).to(e,{scale:y}).start()},t.fixedTo=function(t,e){void 0===e&&(e=2);var i=10^e;return Math.floor(t*i)/i},t.getRandomTarget=function(t){var e=t.length;return e>0?t[Math.floor(e*Math.random())]:null},t.getCloestNode=function(t,e){var i,n=e.length;if(n>0)for(var r=1e4,o=0;o<n;o++){var s=e[o],a=this.getNodesDis(s,t);a<r&&(r=a,i=s)}else i=null;return i},t.getNodesDis=function(t,e){return this.getDistance(t.position,[e.position.x,e.position.y])},t.getOne=function(){return Math.random()>.5?1:-1},t.getDistance=function(t,e){return Math.abs(e[0]-t.x)+Math.abs(e[1]-t.y)},t.fadeOut=function(t,e){h(t).to(.2,{scale:v},{easing:"elasticOut"}).call((function(){e&&e()})).start()},t.clearSprite=function(t){var e=t.spriteFrame;if(e&&(t.spriteFrame=null,e&&e.refCount>0)){e.decRef();var i=e.texture;this.clearTex(i)}},t.clearTex=function(t){if(t&&t.refCount>0){t.decRef();var e=t.image;e&&e.refCount>0&&e.decRef()}},t.convertUI=function(t,e){if(void 0===e&&(e=!0),e)t.addComponent(p),t.layer=r.Enum.UI_2D,t.setScale(42,42,42);else{t.setScale(.5,.5,.5),t.layer=r.Enum.DEFAULT;var i=t.getComponent(p);i&&i.destroy(),d.ins.getPrefab("")}},t.clearPoly=function(t){var e=t.points.length;if(e>0)for(var i=e-1;i>=0;i--)g.ins.Vec2=t.points.shift(),0==i&&(t.points.length=0,t.apply())},t}()),e._RF.pop()}}})),System.register("chunks:///_virtual/TopView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./AudioMgr.ts","./ResMgr.ts","./Tools.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h,p,f,d,g,m,y,v,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Node,l=t.Sprite,u=t.director,c=t.Color,h=t.Component},function(t){p=t.events,f=t.ui,d=t.topStates,g=t.Key},function(t){m=t.Global},function(t){y=t.AudioMgr},function(t){v=t.default},function(t){w=t.save}],execute:function(){var b,_,C,M,T,S,P,E,x,L,D,R,A;o._RF.push({},"3e566SGoxJNKqYtoXI0Bj8V","TopView",void 0);var I=s.ccclass,B=s.property;t("TopView",(b=I("TopView"),_=B(a),C=B(a),M=B(a),T=B(l),S=B(l),b((x=e((E=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"setting",x,r(e)),n(e,"eggs",L,r(e)),n(e,"store",D,r(e)),n(e,"sound",R,r(e)),n(e,"bgm",A,r(e)),e}i(e,t);var o=e.prototype;return o.start=function(){u.on(p.changeTop,this.changeState,this)},o.showStore=function(){v.ins.getUI(f.StoreView)},o.changeState=function(t){switch(t){case d.showAll:this.setting.active=!0,this.eggs.active=!0,this.store.active=!0;break;case d.hideAll:this.setting.active=!1,this.eggs.active=!1,this.store.active=!1;break;case d.showStore:this.setting.active=!1,this.eggs.active=!0,this.store.active=!0;break;case d.hideStore:case d.showClock:this.setting.active=!1,this.eggs.active=!0,this.store.active=!1;break;case d.showHome:this.setting.active=!0,this.eggs.active=!0}},o.showSettings=function(){var t=this.setting.getChildByName("settings");t.active=!t.active,this.sound.color=1==m.sound?c.WHITE:c.GRAY,this.bgm.color=1==m.bgm?c.WHITE:c.GRAY},o.changeBgm=function(){m.bgm*=-1,this.bgm.color=1==m.bgm?c.WHITE:c.GRAY,m.bgm||y.ins.stopMusic(),w(g.Bgm,m.bgm)},o.changeSound=function(){m.sound*=-1,this.sound.color=1==m.sound?c.WHITE:c.GRAY,w(g.Sound,m.sound)},e}(h)).prototype,"setting",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(E.prototype,"eggs",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(E.prototype,"store",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(E.prototype,"sound",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(E.prototype,"bgm",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=E))||P)),o._RF.pop()}}})),System.register("chunks:///_virtual/TrapCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./GameConfig.ts"],(function(t){var e,i,n,r,o,s,a,l,u,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.RigidBody2D,l=t.director,u=t.Component},function(t){c=t.events},function(t){h=t.GameConfig}],execute:function(){var p,f,d,g,m;o._RF.push({},"4c536dOed5L8Iz+1JmD2n8b","TrapCtrl",void 0);var y=s.ccclass,v=s.property;t("TrapCtrl",(p=y("TrapCtrl"),f=v({min:0,max:20}),p((m=e((g=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"angleSpeed",m,r(e)),e.rigid=null,e}i(e,t);var o=e.prototype;return o.onEnable=function(){if(!this.rigid){var t=this.node.getComponent(a);t&&(this.rigid=t)}l.on(c.initTrap,this.rotateItem,this)},o.onDisable=function(){l.off(c.initTrap,this.rotateItem,this)},o.rotateItem=function(t){void 0===t&&(t=1),this.rigid.wakeUp(),this.rigid.angularVelocity=this.angleSpeed*t*h.timeScale,this.rigid.applyAngularImpulse(1,!0)},e}(u)).prototype,"angleSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),d=g))||d)),o._RF.pop()}}})),System.register("chunks:///_virtual/VecPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,n=t.Vec2,r=t.Vec3}],execute:function(){i._RF.push({},"20e53PZGiVPeahc/wMujqlY","VecPool",void 0),t("VecPool",function(){function t(){this._v2pool=[],this._v3pool=[]}return e(t,[{key:"Vec2",get:function(){return this._v2pool.length>0?this._v2pool.shift():new n},set:function(t){t&&(this._v2pool.length<240?this._v2pool.push(t):(t.x=t.y=null,t=null))}},{key:"Vec3",get:function(){return this._v3pool.length>0?this._v3pool.shift():new r},set:function(t){t&&(this._v3pool.length<240?this._v3pool.push(t):(t.x=t.y=t.z=null,t=null))}}],[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}]),t}())._ins=void 0,i._RF.pop()}}})),System.register("chunks:///_virtual/WxPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts"],(function(t){var e,i,n,r,o;return{setters:[function(t){e=t.createClass,i=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy},function(t){o=t.Main}],execute:function(){r._RF.push({},"53d6cQ5YNFKYL96X+NiCobr","WxPlatform",void 0),t("WxPlatform",function(){function t(){this.wx=window.wx,this.banner=void 0,this.custom=void 0,this.custom1=void 0,this.custom3=void 0,this.rewardVideo2=void 0}var r=t.prototype;return r.init=function(){this.wx.showShareMenu();var t=o.ins.Shares[0].sharePics;t.length>0&&(this.wx.onShareAppMessage((function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrlId:t[e].shareId,imageUrl:t[e].shareLink}})),this.wx.onShareTimeline((function(){var e=Math.floor(Math.random()*t.length);return{title:t[e].shareText,imageUrl:t[e].shareLink,query:""}})))},r.getLaunchOption=function(){return this.wx.getLaunchOptionsSync().query},r.getScene=function(){return this.wx.getLaunchOptionsSync().scene},r.showShare=function(t){if(o.ins.Shares[0]){var e=o.ins.Shares[0].sharePics;e.length<=0||Math.floor(Math.random()*e.length)}},r.hideBanner=function(){null!=this.banner&&(this.banner.destroy(),this.banner=null)},r.showBanner=function(t){},r.showCustomAd=function(t){},r.showCustomAd1=function(t){},r.showCustomAd3=function(){var t=i(n().mark((function t(e){var i,r,s,a=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return");case 2:i=o.ins.Platforms[0].customId[0],this.wx.getSystemInfoSync(),r={top:76,width:375,fixed:0},(s=this.wx.createCustomAd({adUnitId:i,style:r})).onLoad((function(){console.log("原生模板 广告加载成功"),e(1),s.show().then((function(){return console.log("原生模板 广告显示成功")})).catch((function(t){console.log("原生模板 广告显示失败",t),e(0)})),a.custom3=s})),s.onClose((function(t){console.log("关闭原生模板广告",t)})),s.onError((function(t){console.log("原生模板CustomAd 广告加载失败：",t),e(0)}));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.showInterstitialAd=function(t){},r.showRewardVideo=function(t){var e=this,i=this,n=o.ins.Platforms[0].videoId[0];null!=i.rewardVideo2&&i.rewardVideo2.offClose(s);var r=this.wx.createRewardedVideoAd({adUnitId:n});i.rewardVideo2=r,r.load().then((function(){e.wx.showToast({title:"加载中，请稍后",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),console.log("激励视频 广告加载成功"),r.show()})),r.onError((function(i){console.log("激励视频 广告显示失败",i),e.wx.showToast({title:"请稍后再试",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),t(2)}));var s=function e(i){i&&i.isEnded?(console.log("res:  ",i),t(1),r.offClose(e)):(console.log("播放中途退出"),t(0))};r.onClose(s)},e(t,null,[{key:"ins",get:function(){return this._ins||(this._ins=new t,this._ins.init()),this._ins}}]),t}())._ins=void 0,r._RF.pop()}}})),s="virtual:///prerequisite-imports/main",a="chunks:///_virtual/main",System.register(s,[a],(function(t,e){return{setters:[function(e){var i={};for(var n in e)"default"!==n&&"__esModule"!==n&&(i[n]=e[n]);t(i)}],execute:function(){}}})),t("default",n.exports)}),{})}}}));

System.register("chunks:///_virtual/index3.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var r;return{setters:[function(e){r=e.default}],execute:function(){e("default",void 0);var n=e("__cjsMetaURL",t.meta.url);r.define(n,(function(t,r,n,u,i){var s,a;System.register("chunks:///_virtual/internal",[],(function(){return{execute:function(){}}})),s="virtual:///prerequisite-imports/internal",a="chunks:///_virtual/internal",System.register(s,[a],(function(e,t){return{setters:[function(t){var r={};for(var n in t)"default"!==n&&"__esModule"!==n&&(r[n]=t[n]);e(r)}],execute:function(){}}})),e("default",n.exports)}),{})}}}));

System.register("chunks:///_virtual/index4.js",["./cjs-loader.mjs"],(function(e,t){"use strict";var u;return{setters:[function(e){u=e.default}],execute:function(){e("default",void 0);var r=e("__cjsMetaURL",t.meta.url);u.define(r,(function(t,u,r,n,i){var s,c;System.register("chunks:///_virtual/Bundle1",[],(function(){return{execute:function(){}}})),s="virtual:///prerequisite-imports/Bundle1",c="chunks:///_virtual/Bundle1",System.register(s,[c],(function(e,t){return{setters:[function(t){var u={};for(var r in t)"default"!==r&&"__esModule"!==r&&(u[r]=t[r]);e(u)}],execute:function(){}}})),e("default",r.exports)}),{})}}}));

System.register("chunks:///_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){"use strict";return{execute:function(){function e(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(e,r){return(n=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t}))(e,r)}t({applyDecoratedDescriptor:function(t,e,r,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null);return i},assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function c(t){e(a,o,i,c,u,"next",t)}function u(t){e(a,o,i,c,u,"throw",t)}c(void 0)}))}},createClass:function(t,e,n){e&&r(t.prototype,e);n&&r(t,n);return Object.defineProperty(t,"prototype",{writable:!1}),t},inheritsLoose:function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)},initializerDefineProperty:function(t,e,r,n){if(!r)return;Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return e}));var e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return _()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var s={};function h(){}function p(){}function v(){}var y={};u(y,i,(function(){return this}));var d=Object.getPrototypeOf,g=d&&d(d(j([])));g&&g!==r&&n.call(g,i)&&(y=g);var m=v.prototype=h.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==typeof s&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function L(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=f(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,s;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return p.prototype=v,u(m,"constructor",v),u(v,"constructor",p),p.displayName=u(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},e.awrap=function(t){return{__await:t}},w(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(m),u(m,c,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e},setPrototypeOf:n})}}}));

} }; });